import{H as N,F as w,a as C,b as x,g as E}from"../footer/footer.dd152760.js";import{u as V}from"../vue-router/vue-router.2a03ab18.js";import{s as I}from"../Http/Http.25554809.js";import{_ as L}from"../../assets/index.26d0010e.js";import{E as n}from"../element-plus/element-plus.8a71346d.js";import{d as h,Z as g,b as m,ai as i,o as D,c as O,U as t,a as s,O as r,F as T,S as k}from"../@vue/@vue.33375b2b.js";import"../store/store.dd17c4c7.js";import"../pinia/pinia.f3acc3ec.js";import"../vue-demi/vue-demi.4f3c4c97.js";import"../vue-i18n/vue-i18n.be8a1420.js";import"../@intlify/@intlify.bed53827.js";import"../vue/vue.cde45c3f.js";import"../axios/axios.3ae77db0.js";import"../nprogress/nprogress.727c9a9a.js";import"../js-cookie/js-cookie.0390a690.js";import"../@element-plus/@element-plus.b2e2a5ea.js";import"../pinia-plugin-persistedstate/pinia-plugin-persistedstate.54412c64.js";import"../lodash-es/lodash-es.328e2464.js";import"../@vueuse/@vueuse.a0ee3865.js";import"../@popperjs/@popperjs.f1fb8f77.js";import"../@ctrl/@ctrl.9c8f424f.js";import"../dayjs/dayjs.0b3e8f35.js";import"../async-validator/async-validator.21881447.js";import"../memoize-one/memoize-one.f0fba034.js";import"../normalize-wheel-es/normalize-wheel-es.94de1731.js";import"../@floating-ui/@floating-ui.f5870b60.js";const A={class:"login container"},S={class:"box"},U={class:"flex"},H=h({__name:"Login",setup(J){const u=g({userNameOrEmail:m(),password:m()}),p=V(),d=m(""),c=m("");m("first"),g({userName:"",fullName:"",password:"",agent:"",companyName:"",email:"",mobile:"",wechat:""});const F=()=>(d.value==="admin"&&c.value==="admin"?(n({type:"success",message:"\u767B\u5F55\u6210\u529F"}),_()):d.value===""&&c.value===""?n({type:"error",message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D\u548C\u5BC6\u7801"}):n({type:"error",message:"\u7528\u6237\u540D\u6216\u5BC6\u7801\u8F93\u5165\u9519\u8BEF"}),{userName:d.value,pwd:c.value}),_=async()=>{C(u).then(async o=>{if(console.log("Login",o),o.status==403){n.error("\u7B49\u5F85\u7BA1\u7406\u5458\u6FC0\u6D3B\u767B\u5F55");return}o.code==200&&(I(o.data.accessToken),await B(o.data.uid),n.success("\u767B\u5F55\u6210\u529F"))}).catch(o=>{console.log(o)})},B=async o=>{x({uid:o}).then(e=>{localStorage.setItem("userInfo",JSON.stringify(e.data)),e.data.couponId?E(e.data.couponId).then(l=>{localStorage.setItem("couponInfo",JSON.stringify(l.data)),setTimeout(()=>{p.push("/")},200)}).catch(l=>{setTimeout(()=>{p.push("/")},200)}):setTimeout(()=>{p.push("/")},200)}).catch(e=>{console.log(e)})};return(o,e)=>{const l=i("el-input"),f=i("el-form-item"),v=i("el-button"),y=i("el-form"),b=i("el-card");return D(),O(T,null,[t(N),s("div",A,[t(b,{class:"bg"},{default:r(()=>[s("div",S,[e[6]||(e[6]=s("div",{class:"tc"},[s("span",null,"\u7528\u6237\u767B\u5F55")],-1)),t(y,{model:u,"label-position":"right","label-width":"100px"},{default:r(()=>[t(f,{label:"\u7528\u6237\u540D\uFF1A"},{default:r(()=>[t(l,{modelValue:u.userNameOrEmail,"onUpdate:modelValue":e[0]||(e[0]=a=>u.userNameOrEmail=a),placeholder:"\u8F93\u5165\u7528\u6237\u540D\u6216\u8005\u90AE\u7BB1",clearable:""},null,8,["modelValue"])]),_:1}),t(f,{label:"\u5BC6\u7801\uFF1A"},{default:r(()=>[t(l,{type:"password",modelValue:u.password,"onUpdate:modelValue":e[1]||(e[1]=a=>u.password=a),placeholder:"\u8F93\u5165\u5BC6\u7801",onKeydown:e[2]||(e[2]=a=>a.code==="Enter"?F():""),clearable:""},null,8,["modelValue"])]),_:1}),t(f,null,{default:r(()=>[s("div",U,[t(v,{type:"primary",onClick:e[3]||(e[3]=a=>_())},{default:r(()=>e[4]||(e[4]=[k("\u767B\u5F55")])),_:1}),e[5]||(e[5]=s("a",{href:"#/forget",class:"fr"},"\u5FD8\u8BB0\u5BC6\u7801",-1))])]),_:1})]),_:1},8,["model"])])]),_:1})]),t(w)],64)}}});var de=L(H,[["__scopeId","data-v-96f17ec4"]]);export{de as default};
