import{u as ne}from"../vue-router/vue-router.facfef26.js";import{d as U,Z as z,e as S,h as H,i as K,f as G,_ as W,ag as y,o as t,c as b,U as a,O as u,F as D,a7 as w,M as c,S as r,T as i,a as l,R as m,P as se,V as re,a2 as Y,bg as O,bf as P,u as V}from"../@vue/@vue.d7f25643.js";import{b as ie,r as X}from"../pub/pub.42b28978.js";import{_ as R}from"../../assets/index.65a1e02d.js";import{u as x,a as de,g as pe,b as _e,c as ce,d as me}from"../order/order.d11edb4d.js";import{E as fe}from"../element-plus/element-plus.741c104f.js";import"../Http/Http.59063432.js";import"../axios/axios.3ae77db0.js";import"../nprogress/nprogress.6998436e.js";import"../@intlify/@intlify.223376e2.js";import"../auth/auth.28781c65.js";import"../js-cookie/js-cookie.0390a690.js";import"../pinia/pinia.bde32438.js";import"../vue-demi/vue-demi.4f3c4c97.js";import"../vue-i18n/vue-i18n.e41c5058.js";import"../vue/vue.996f799f.js";import"../echarts/echarts.00da4ec3.js";import"../tslib/tslib.e35f93b8.js";import"../zrender/zrender.643dc830.js";import"../vue-json-viewer/vue-json-viewer.e0635ff8.js";import"../clipboard/clipboard.e72d304d.js";import"../@element-plus/@element-plus.72a15bc2.js";import"../pinia-plugin-persistedstate/pinia-plugin-persistedstate.54412c64.js";import"../lodash-es/lodash-es.d3b5e6f4.js";import"../@vueuse/@vueuse.07c2e845.js";import"../@popperjs/@popperjs.f1fb8f77.js";import"../@ctrl/@ctrl.9c8f424f.js";import"../dayjs/dayjs.074df034.js";import"../async-validator/async-validator.21881447.js";import"../memoize-one/memoize-one.f0fba034.js";import"../escape-html/escape-html.d572c0fd.js";import"../normalize-wheel-es/normalize-wheel-es.94de1731.js";import"../@floating-ui/@floating-ui.ded716ca.js";const Fe=U({components:{},props:{order:{type:Object},invoice:{type:Object}},emits:["update"],setup(e,d){const n=z({formData:{ruleListDataC:[],ruleListDataLLC:[],selectRegion:"",regionText:"",companyType:"",companyMainIncome:{price:0},mainBusinessIncome:{type:"",inUSchildCompany:2,noUSchildCompany:1},mainBusinessType:"",totalCompanyAssets:"",fixedAssetAmount:"",isMoneyTrading:!0,isChildCompany:!0,isConfirm:!0,amount_fixed_asset:0,exchange_fund_com_number:0,subsidiary_us:0,subsidiary_non_us_number:0},selectAreaOptions:[],rules:{mainBusinessType:[{required:!0,message:"\u5B57\u6BB5\u503C\u4E0D\u53EF\u4E3A\u7A7A"},{pattern:/^[-]?\d+(\.\d+)?$/,trigger:["blur","change"],message:""}],totalAsset:[{required:!0,message:"\u5B57\u6BB5\u503C\u4E0D\u53EF\u4E3A\u7A7A"},{pattern:/^[-]?\d+(\.\d+)?$/,trigger:["blur","change"],message:""}],fixedAssetAmount:[{required:!0,message:"\u5B57\u6BB5\u503C\u4E0D\u53EF\u4E3A\u7A7A"},{pattern:/^[-]?\d+(\.\d+)?$/,trigger:["blur","change"],message:""}]},noUSAOptions:[{label:"\u975E\u7F8E\u56FD",value:1}],incTypeOptions:[{label:"C\u516C\u53F8",value:1},{label:"LLC",value:2}],businessTypeOptions:[{label:"\u9009\u62E9",value:1,income:"0",price:260,remark:"0\u8D44\u4EA7\u8FD0\u8425",area:"\u7279\u62C9\u534E\u5DDE \u534E\u76DB\u987F  \u4F5B\u7F57\u91CC\u8FBE"},{label:"\u9009\u62E9",value:2,income:"0",price:300,remark:"\u5305\u62EC\u7B80\u5355\u8C03\u8D26",area:"\u5176\u4ED6\u5DDE"},{label:"\u9009\u62E9",value:3,income:"25",price:400,remark:"",area:""},{label:"\u9009\u62E9",value:4,income:"25-100",price:600,remark:"",area:""},{label:"\u9009\u62E9",value:5,income:"100-200",price:700,remark:"",area:""},{label:"\u9009\u62E9",value:6,income:"200-500",price:800,remark:"",area:""}],isFlowOptions:[{label:"\u662F",value:1},{label:"\u5426",value:0}],isChildOptions:[{label:"\u662F",value:1},{label:"\u5426",value:0}]}),A=S({price:0});n.formData=e.order;const p=()=>{d.emit("update",n.formData)},h=H(),v=()=>{h.proxy.$refs.vForm.validate(C=>{})},o=()=>{h.proxy.$refs.vForm.resetFields()},F=()=>{ie().then(C=>{console.log("\u5168\u90E8\u5DDE",C),n.selectAreaOptions=C.data}).catch(C=>{console.log(C)})},s=()=>{let C=n.formData.selectRegion;X({page:1,count:20,businessType:10,region:C,company_type:"C"}).then($=>{const E=$.data.toSorted((_,I)=>_.order>I.order?1:-1);n.formData.ruleListDataC=E}),X({page:1,count:20,businessType:10,region:C,company_type:"LLC"}).then($=>{const E=$.data.toSorted((_,I)=>_.order>I.order?1:-1);n.formData.ruleListDataLLC=E})},g=()=>{},B=()=>{},f=()=>{n.formData.ruleListDataC=ruleListDataCCCache.value.sort(C=>C.company_type==type)},k=C=>{n.formData.companyMainIncome=C},L=()=>{let C=0;if(n.formData.ruleListDataC.map($=>{$.vale_type=="TEXT_MULTIPLY"?C+=(n.formData[$.field_name]||0)*$.price:$.vale_type=="TEXT_GREATER"&&n.formData[$.field_name]>Number($.rule_content)&&(C+=$.price)}),n.formData.companyType==2){if(n.formData.is_c_rule){if(n.formData.first_year){let $=n.formData.ruleListDataLLC.find(E=>E.field_name==="first_year");$&&(C+=$.price)}}else if(!n.formData.has_us_tax_no){let $=n.formData.ruleListDataLLC.find(E=>E.field_name===n.formData.taxType);$&&(C+=$.price)}}return n.formData.totalPrice=C+n.formData.companyMainIncome.price,e.invoice.price=n.formData.totalPrice,C+n.formData.companyMainIncome.price};return K(()=>{F(),s()}),G(()=>n.formData.selectRegion,C=>{let $=n.selectAreaOptions.find(E=>E.code==C)||{};n.formData.regionText=$.name}),G(()=>n.formData.selectRegion,C=>{s()}),G(()=>e.order,C=>{n.formData=C}),{...W(n),companyMainIncome:A,saveOrder:p,submitForm:v,resetForm:o,regionChange:g,companyTypeChange:B,companyTypeChange:B,companyMainIncomeChange:k,order:f,computedTotalPrice:L}}}),j=e=>(O("data-v-1396abce"),e=e(),P(),e),ye=j(()=>l("h2",null,"\u62A5\u4EF7",-1)),be=j(()=>l("div",{class:"desc"},"\u9009\u62E9\u60A8\u60F3\u8981\u7684\u5DDE\u548C\u4E1A\u52A1\u7C7B\u578B\uFF0C\u7136\u540E\u9009\u62E9\u60A8\u7684\u9644\u52A0\u7EC4\u4EF6\u4EE5\u5F00\u59CB\u60A8\u7684\u8BA2\u5355",-1)),ve={class:"total-price"},ge={class:"price"},he={class:"table-container"},Ee={class:"table-layout"},De=j(()=>l("tr",null,[l("td",{class:"table-cell",bgcolor:"#f1f1f1",style:{width:"80px"}},"\u9009\u9879"),l("td",{class:"table-cell",bgcolor:"#f1f1f1",style:{width:"100px"}},"\u6536\u5165(\u7F8E\u91D1)"),l("td",{class:"table-cell",bgcolor:"#f1f1f1",style:{width:"100px"}},"\u62A5\u4EF7")],-1)),Ae={key:0},Ce={class:"table-cell"},Be={class:"table-cell"},$e={class:"table-cell"},ke={class:"price"},Ie=j(()=>l("div",{class:"tip"},"\u5173\u8054\u65B9\u5305\u62EC\u6BCD\u516C\u53F8\u3001\u5B50\u516C\u53F8\u6216\u540C\u4E00\u63A7\u5236\u4EBA\u4E0B\u7684\u5176\u4ED6\u5144\u5F1F\u516C\u53F8",-1));function we(e,d,n,A,p,h){const v=y("el-divider"),o=y("el-option"),F=y("el-select"),s=y("el-form-item"),g=y("el-col"),B=y("el-radio"),f=y("el-radio-group"),k=y("el-row"),L=y("el-switch"),C=y("el-input"),$=y("el-input-number"),E=y("el-form");return t(),b(D,null,[a(v,{"content-position":"left"},{default:u(()=>[ye]),_:1}),be,a(E,{model:e.formData,ref:"vForm",rules:e.rules,"label-position":"right","label-width":"180px",size:"default",onSubmit:d[14]||(d[14]=Y(()=>{},["prevent"]))},{default:u(()=>[a(k,null,{default:u(()=>[a(g,{span:16,class:"grid-cell"},{default:u(()=>[a(k,null,{default:u(()=>[a(g,{span:24},{default:u(()=>[a(k,null,{default:u(()=>[a(g,{span:12},{default:u(()=>[a(s,{label:"\u9009\u62E9\u533A\u57DF\uFF1A",prop:"selectRegion",class:"label-right-align"},{default:u(()=>[a(F,{onChange:e.regionChange,modelValue:e.formData.selectRegion,"onUpdate:modelValue":d[0]||(d[0]=_=>e.formData.selectRegion=_),class:"full-width-input",placeholder:"\u8BF7\u9009\u62E9",clearable:""},{default:u(()=>[(t(!0),b(D,null,w(e.selectAreaOptions,(_,I)=>(t(),c(o,{key:I,label:_.name,value:_.code},null,8,["label","value"]))),128))]),_:1},8,["onChange","modelValue"])]),_:1})]),_:1}),a(g,{span:6,style:{"margin-left":"-120px"}},{default:u(()=>[a(s,{label:"",prop:"noUSA"},{default:u(()=>[a(f,{modelValue:e.formData.noUSA,"onUpdate:modelValue":d[1]||(d[1]=_=>e.formData.noUSA=_)},{default:u(()=>[(t(!0),b(D,null,w(e.noUSAOptions,(_,I)=>(t(),c(B,{key:I,label:_.value,disabled:_.disabled,style:{"{\n                          display":"inline"}},{default:u(()=>[r(i(_.label),1)]),_:2},1032,["label","disabled"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),a(g,{span:24},{default:u(()=>[a(s,{label:"\u516C\u53F8\u7C7B\u578B\uFF1A",prop:"companyType",class:"label-right-align"},{default:u(()=>[a(f,{onChange:e.companyChange,modelValue:e.formData.companyType,"onUpdate:modelValue":d[2]||(d[2]=_=>e.formData.companyType=_)},{default:u(()=>[(t(!0),b(D,null,w(e.incTypeOptions,(_,I)=>(t(),c(B,{key:I,label:_.value,disabled:_.disabled,style:{"{\n                      display":"inline"},onChange:T=>e.companyTypeChange(_.value)},{default:u(()=>[r(i(_.label),1)]),_:2},1032,["label","disabled","onChange"]))),128))]),_:1},8,["onChange","modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),a(g,{span:8,class:"grid-cell"},{default:u(()=>[l("div",ve,[l("div",null,[r(" \u62A5\u4EF7\uFF1A "),l("span",ge,"$"+i(e.computedTotalPrice()),1)])])]),_:1})]),_:1}),e.formData.companyType==2&&e.formData.companyType?(t(),c(k,{key:0},{default:u(()=>[a(g,{span:24,class:"grid-cell"},{default:u(()=>[a(s,{label:"\u662F\u5426\u6309\u7167C\u516C\u53F8\u65B9\u5F0F\u7EB3\u7A0E\uFF1A",prop:"is_c_rule",class:"required label-right-align"},{default:u(()=>[a(L,{modelValue:e.formData.is_c_rule,"onUpdate:modelValue":d[3]||(d[3]=_=>e.formData.is_c_rule=_),"active-text":"\u662F","inactive-text":"\u5426"},null,8,["modelValue"])]),_:1}),e.formData.is_c_rule?(t(),c(s,{key:0,label:"\u662F\u5426\u7B2C\u4E00\u5E74\u7EB3\u7A0E\uFF1A",prop:"first_year",class:"required label-right-align"},{default:u(()=>[a(L,{modelValue:e.formData.first_year,"onUpdate:modelValue":d[4]||(d[4]=_=>e.formData.first_year=_),"active-text":"\u662F","inactive-text":"\u5426"},null,8,["modelValue"])]),_:1})):m("",!0),e.formData.is_c_rule?m("",!0):(t(),c(s,{key:1,label:"\u662F\u5426\u6709\u7F8E\u56FD\u7A0E\u53F7\uFF1A",prop:"has_us_tax_no",class:"required label-right-align"},{default:u(()=>[a(L,{modelValue:e.formData.has_us_tax_no,"onUpdate:modelValue":d[5]||(d[5]=_=>e.formData.has_us_tax_no=_),"active-text":"\u662F","inactive-text":"\u5426"},null,8,["modelValue"])]),_:1})),!e.formData.is_c_rule&&!e.formData.has_us_tax_no?(t(),c(s,{key:2,label:"\u7533\u8BF7\u7A0E\u53F7\uFF1A",prop:"has_us_tax_no",class:"required label-right-align"},{default:u(()=>[a(L,{modelValue:e.formData.taxType,"onUpdate:modelValue":d[6]||(d[6]=_=>e.formData.taxType=_),"active-value":"apply_individual","inactive-value":"apply_company","active-text":"\u7533\u8BF7\u4E2A\u4EBA\u7A0E\u53F7","inactive-text":"\u7533\u8BF7\u516C\u53F8\u7A0E\u53F7"},null,8,["modelValue"])]),_:1})):m("",!0)]),_:1})]),_:1})):m("",!0),a(k,null,{default:u(()=>[se(a(g,{span:24,class:"grid-cell"},{default:u(()=>[a(s,{label:"\u516C\u53F8\u4E3B\u8425\u4E1A\u52A1\u6536\u5165\uFF1A",prop:"businessType",class:"label-right-align"},{default:u(()=>[a(f,{modelValue:e.formData.mainBusinessIncome.type,"onUpdate:modelValue":d[7]||(d[7]=_=>e.formData.mainBusinessIncome.type=_)},{default:u(()=>[l("div",he,[l("table",Ee,[l("tbody",null,[De,(t(!0),b(D,null,w(e.formData.ruleListDataC,(_,I)=>(t(),b(D,null,[_.option?(t(),b("tr",Ae,[l("td",Ce,[(t(),c(B,{key:I,label:_.id,style:{"{\n                              display":"inline"},onChange:T=>e.companyMainIncomeChange(_)},{default:u(()=>[r(i(_.label),1)]),_:2},1032,["label","onChange"]))]),l("td",Be,i(_.rule_content)+"\u4E07",1),l("td",$e,[l("span",ke,"$"+i(_.price),1)])])):m("",!0)],64))),256))])])])]),_:1},8,["modelValue"])]),_:1})]),_:1},512),[[re,e.formData.companyType]]),e.formData.companyType?(t(!0),b(D,{key:0},w(e.formData.ruleListDataC,(_,I)=>(t(),b(D,null,[_.option?m("",!0):(t(),c(g,{key:0,span:24,class:"grid-cell"},{default:u(()=>[_.field_name=="main_business_type"?(t(),c(s,{key:0,label:"\u4E3B\u8425\u4E1A\u52A1\u7C7B\u578B\uFF1A",prop:"main_business_type",class:"required label-right-align"},{default:u(()=>[a(C,{modelValue:e.formData.main_business_type,"onUpdate:modelValue":d[8]||(d[8]=T=>e.formData.main_business_type=T),type:"text",clearable:""},null,8,["modelValue"])]),_:1})):m("",!0),_.field_name=="total_asset"?(t(),c(s,{key:1,label:"\u516C\u53F8\u8D44\u4EA7\u603B\u989D\uFF1A",prop:"total_asset",class:"required label-right-align"},{default:u(()=>[a(C,{modelValue:e.formData.total_asset,"onUpdate:modelValue":d[9]||(d[9]=T=>e.formData.total_asset=T),type:"text",clearable:""},{append:u(()=>[r("\u4E07\u7F8E\u5143")]),_:1},8,["modelValue"])]),_:1})):m("",!0),_.field_name=="amount_fixed_asset"?(t(),c(s,{key:2,label:"\u56FA\u5B9A\u8D44\u4EA7\u91D1\u989D\uFF1A",prop:"amount_fixed_asset",class:"required label-right-align"},{default:u(()=>[a(C,{onChange:e.computedTotalPrice,modelValue:e.formData.amount_fixed_asset,"onUpdate:modelValue":d[10]||(d[10]=T=>e.formData.amount_fixed_asset=T),type:"text",clearable:"",placeholder:"\u6CE8\uFF1A\u8D39\u7528\u4E3A"+_.price},{append:u(()=>[r("\u4E07\u7F8E\u5143")]),_:2},1032,["onChange","modelValue","placeholder"])]),_:2},1024)):m("",!0),_.field_name=="exchange_fund_com_number"?(t(),c(s,{key:3,label:"\u8D44\u91D1\u5F80\u6765\u516C\u53F8\u6570\uFF1A",prop:"exchange_fund_com_number",class:"required label-right-align"},{default:u(()=>[a($,{onChange:e.computedTotalPrice,style:{width:"250px"},min:"0",modelValue:e.formData.exchange_fund_com_number,"onUpdate:modelValue":d[11]||(d[11]=T=>e.formData.exchange_fund_com_number=T),type:"text",clearable:"",placeholder:"\u6CE8\uFF1A\u8D39\u7528\u4E3A\u516C\u53F8\u6570 x "+_.price},null,8,["onChange","modelValue","placeholder"]),Ie]),_:2},1024)):m("",!0),_.field_name=="subsidiary_us"?(t(),c(s,{key:4,label:"\u5728\u7F8E\u5B50\u516C\u53F8\u6570\uFF1A",prop:"subsidiary_us",class:"required label-right-align"},{default:u(()=>[a($,{onChange:e.computedTotalPrice,style:{width:"250px"},min:"0",modelValue:e.formData.subsidiary_us,"onUpdate:modelValue":d[12]||(d[12]=T=>e.formData.subsidiary_us=T),type:"text",clearable:"",placeholder:"\u6CE8\uFF1A\u8D39\u7528\u4E3A\u516C\u53F8\u6570 x "+_.price},null,8,["onChange","modelValue","placeholder"])]),_:2},1024)):m("",!0),_.field_name=="subsidiary_non_us_number"?(t(),c(s,{key:5,label:"\u975E\u7F8E\u5B50\u516C\u53F8\u6570\uFF1A",prop:"subsidiary_non_us_number",class:"required label-right-align"},{default:u(()=>[a($,{onChange:e.computedTotalPrice,style:{width:"250px"},min:"0",modelValue:e.formData.subsidiary_non_us_number,"onUpdate:modelValue":d[13]||(d[13]=T=>e.formData.subsidiary_non_us_number=T),type:"text",clearable:"",placeholder:"\u6CE8\uFF1A\u8D39\u7528\u4E3A\u516C\u53F8\u6570 x "+_.price},null,8,["onChange","modelValue","placeholder"])]),_:2},1024)):m("",!0)]),_:2},1024))],64))),256)):m("",!0)]),_:1})]),_:1},8,["model","rules"])],64)}var Te=R(Fe,[["render",we],["__scopeId","data-v-1396abce"]]);const Se=U({components:{},props:{order:{type:Object}},emits:["update"],setup(e,d){return{order:S(e.order)}}}),ee=e=>(O("data-v-2f614a02"),e=e(),P(),e),Le=ee(()=>l("h2",null,"\u786E\u8BA4\u62A5\u4EF7",-1)),Ve={class:"desc"},Ue={key:0},Oe={key:1},Pe={class:"total-price"},Re=ee(()=>l("span",null,"\u5408\u8BA1\uFF1A",-1)),Ne={class:"price"};function Me(e,d,n,A,p,h){const v=y("el-divider"),o=y("el-descriptions-item"),F=y("el-descriptions");return t(),b(D,null,[a(v,{"content-position":"left"},{default:u(()=>[Le]),_:1}),l("div",Ve,[a(F,{title:"\u8BA2\u5355\u53F7"+e.order.id,column:2},{default:u(()=>[a(o,{span:2,label:"\u6240\u5728\u5DDE\uFF1A"},{default:u(()=>[r(i(e.order.regionText),1)]),_:1}),a(o,{span:2,label:"\u516C\u53F8\u7C7B\u578B\uFF1A"},{default:u(()=>[r(i(e.order.companyType==1?"C":"LLC"),1)]),_:1}),e.order.companyType==2?(t(!0),b(D,{key:0},w(e.order.ruleListDataLLC,s=>(t(),b(D,null,[s.field_name=="is_c_rule"?(t(),c(o,{key:0,label:"\u662F\u5426\u6309\u7167C\u516C\u53F8\u65B9\u5F0F\u7EB3\u7A0E\uFF1A",span:2},{default:u(()=>[r(i(e.order.is_c_rule?"\u662F":"\u5426"),1)]),_:1})):m("",!0),e.order.is_c_rule?(t(),b(D,{key:1},[s.field_name=="first_year"?(t(),c(o,{key:0,label:"\u662F\u5426\u7B2C\u4E00\u5E74\u7EB3\u7A0E\uFF1A"},{default:u(()=>[r(i(e.order.first_year?"\u662F":"\u5426"),1)]),_:1})):m("",!0),s.field_name=="first_year"?(t(),c(o,{key:1,label:"\u8D39\u7528\uFF1A"},{default:u(()=>[e.order.first_year?(t(),b("span",Ue,i(s.price),1)):(t(),b("span",Oe,"0"))]),_:2},1024)):m("",!0)],64)):(t(),b(D,{key:2},[s.field_name=="has_us_tax_no"?(t(),c(o,{key:0,span:2,label:"\u662F\u5426\u6709\u7F8E\u56FD\u7A0E\u53F7\uFF1A"},{default:u(()=>[r(i(e.order.has_us_tax_no?"\u662F":"\u5426"),1)]),_:1})):m("",!0),e.order.has_us_tax_no?m("",!0):(t(),b(D,{key:1},[s.field_name=="apply_individual"&&e.order.taxType=="apply_individual"?(t(),c(o,{key:0,label:"\u7533\u8BF7\u7A0E\u53F7\u7C7B\u578B\uFF1A"},{default:u(()=>[r("\u4E2A\u4EBA\u80A1\u4E1C")]),_:1})):m("",!0),s.field_name=="apply_individual"&&e.order.taxType=="apply_individual"?(t(),c(o,{key:1,label:"\u8D39\u7528\uFF1A"},{default:u(()=>[r(i(s.price),1)]),_:2},1024)):m("",!0),s.field_name=="apply_company"&&e.order.taxType=="apply_company"?(t(),c(o,{key:2,label:"\u7533\u8BF7\u7A0E\u53F7\u7C7B\u578B\uFF1A"},{default:u(()=>[r("\u516C\u53F8\u80A1\u4E1C")]),_:1})):m("",!0),s.field_name=="apply_company"&&e.order.taxType=="apply_company"?(t(),c(o,{key:3,label:"\u8D39\u7528\uFF1A"},{default:u(()=>[r(i(s.price)+"\u7F8E\u5143",1)]),_:2},1024)):m("",!0)],64))],64))],64))),256)):m("",!0),a(o,{label:"\u4E3B\u8425\u4E1A\u52A1\u6536\u5165\uFF1A"},{default:u(()=>[r(i(e.order.companyMainIncome.rule_content)+"\u4E07\u7F8E\u5143",1)]),_:1}),a(o,{label:"\u8D39\u7528\uFF1A"},{default:u(()=>[r(i(e.order.companyMainIncome.price||0)+"\u7F8E\u5143",1)]),_:1}),a(o,{span:2,label:"\u4E3B\u8425\u4E1A\u52A1\u7C7B\u578B\uFF1A"},{default:u(()=>[r(i(e.order.main_business_type),1)]),_:1}),a(o,{span:2,label:"\u516C\u53F8\u8D44\u4EA7\u603B\u989D\uFF1A"},{default:u(()=>[r(i(e.order.total_asset),1)]),_:1}),(t(!0),b(D,null,w(e.order.ruleListDataC,s=>(t(),b(D,null,[s.field_name=="amount_fixed_asset"?(t(),c(o,{key:0,label:"\u56FA\u5B9A\u8D44\u4EA7\u91D1\u989D\uFF1A"},{default:u(()=>[r(i(e.order.amount_fixed_asset||0)+"\u4E07\u7F8E\u5143",1)]),_:1})):m("",!0),s.field_name=="amount_fixed_asset"?(t(),c(o,{key:1,label:"\u8D39\u7528\uFF1A"},{default:u(()=>[r(i(e.order.amount_fixed_asset>0?s.price:0)+"\u7F8E\u5143",1)]),_:2},1024)):m("",!0),s.field_name=="exchange_fund_com_number"?(t(),c(o,{key:2,label:"\u8D44\u91D1\u5F80\u6765\u516C\u53F8\u6570\uFF1A"},{default:u(()=>[r(i(e.order.exchange_fund_com_number),1)]),_:1})):m("",!0),s.field_name=="exchange_fund_com_number"?(t(),c(o,{key:3,label:"\u8D39\u7528\uFF1A"},{default:u(()=>[r(i((e.order.exchange_fund_com_number||0)*s.price)+"\u7F8E\u5143",1)]),_:2},1024)):m("",!0),s.field_name=="subsidiary_us"?(t(),c(o,{key:4,label:"\u5728\u7F8E\u5B50\u516C\u53F8\u6570\uFF1A"},{default:u(()=>[r(i(e.order.subsidiary_us),1)]),_:1})):m("",!0),s.field_name=="subsidiary_us"?(t(),c(o,{key:5,label:"\u8D39\u7528\uFF1A"},{default:u(()=>[r(i((e.order.subsidiary_us||0)*s.price||0)+"\u7F8E\u5143",1)]),_:2},1024)):m("",!0),s.field_name=="subsidiary_non_us_number"?(t(),c(o,{key:6,label:"\u975E\u7F8E\u5B50\u516C\u53F8\uFF1A"},{default:u(()=>[r(i(e.order.subsidiary_non_us_number),1)]),_:1})):m("",!0),s.field_name=="subsidiary_non_us_number"?(t(),c(o,{key:7,label:"\u8D39\u7528\uFF1A"},{default:u(()=>[r(i((e.order.subsidiary_non_us_number||0)*s.price||0)+"\u7F8E\u5143",1)]),_:2},1024)):m("",!0)],64))),256))]),_:1},8,["title"]),l("div",null,[l("span",Pe,[Re,l("span",Ne,"$"+i(e.order.totalPrice),1)])])])],64)}var qe=R(Se,[["render",Me],["__scopeId","data-v-2f614a02"]]);const ze=U({components:{},props:{invoice:{type:Object}},emits:["update"],setup(e,d){const n=z({formData:{},rules:{email:[{pattern:/^([-_A-Za-z0-9.]+)@([_A-Za-z0-9]+\.)+[A-Za-z0-9]{2,3}$/,trigger:["blur","change"],message:""}]}});n.formData=e.invoice;const A=()=>{d.emit("update",n.formData)},p=H(),h=()=>{p.proxy.$refs.vForm.validate(o=>{})},v=()=>{p.proxy.$refs.vForm.resetFields()};return{...W(n),submitForm:h,resetForm:v,saveInvoice:A}}}),ue=e=>(O("data-v-ada9d068"),e=e(),P(),e),je=ue(()=>l("h2",null,"\u51FA\u5177\u53D1\u7968",-1)),Ze=ue(()=>l("div",{class:"desc"},"\u51FA\u5177\u53D1\u7968",-1)),Ge={class:"price",style:{"font-size":"30px"}};function Je(e,d,n,A,p,h){const v=y("el-divider"),o=y("el-form-item"),F=y("el-col"),s=y("el-input"),g=y("el-row"),B=y("el-form");return t(),b(D,null,[a(v,{"content-position":"left"},{default:u(()=>[je]),_:1}),Ze,a(B,{model:e.formData,ref:"vForm",rules:e.rules,"label-position":"right","label-width":"140px",size:"small",onSubmit:d[1]||(d[1]=Y(()=>{},["prevent"]))},{default:u(()=>[a(g,null,{default:u(()=>[a(F,{span:24,class:"grid-cell"},{default:u(()=>[a(o,{label:"\u5BA2\u6237\u5355\u4F4D\u540D\u5B57\uFF1A",prop:"businessIncome",class:"required label-right-align"},{default:u(()=>[r(i(e.formData.agentName),1)]),_:1})]),_:1}),a(F,{span:24,class:"grid-cell"},{default:u(()=>[a(o,{label:"\u670D\u52A1\u516C\u53F8\u540D\u5B57\uFF1A",prop:"total1",class:"required label-right-align"},{default:u(()=>[r(i(e.formData.companyName),1)]),_:1})]),_:1}),a(F,{span:24,class:"grid-cell"},{default:u(()=>[a(o,{label:"\u670D\u52A1\u5185\u5BB9\uFF1A",prop:"total2",class:"required label-right-align"},{default:u(()=>[r(i(e.formData.content),1)]),_:1})]),_:1}),a(F,{span:24,class:"grid-cell"},{default:u(()=>[a(o,{label:"\u90AE\u7BB1\uFF1A",prop:"email",class:"label-right-align"},{default:u(()=>[a(s,{modelValue:e.formData.email,"onUpdate:modelValue":d[0]||(d[0]=f=>e.formData.email=f),placeholder:"\u9ED8\u8BA4\u53D1\u9001\u5230\u6CE8\u518C\u65F6\u7684\u90AE\u7BB1",type:"text",style:{width:"200px"},clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),a(F,{span:24,class:"grid-cell"},{default:u(()=>[a(o,{label:"\u5408\u8BA1\uFF1A",prop:"isChild",class:"label-right-align"},{default:u(()=>[l("span",Ge,"$"+i(e.formData.price),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])],64)}var Qe=R(ze,[["render",Je],["__scopeId","data-v-ada9d068"]]);const Xe=U({components:{},props:{pay:{type:Object},orderId:String},emits:["update"],setup(e,d){const n=S([]);n.value=e.pay.voucher.map(F=>({url:F,name:F}));const A=S(""),p=S(!1);return{fileList:n,dialogImageUrl:A,dialogVisible:p,handleRemove:(F,s)=>{n.value=s,d.emit("update",n.value.map(g=>g.url))},handlePictureCardPreview:F=>{A.value=F.url,p.value=!0},subUploadFile:F=>{console.log(F);const s=new FormData;if(s.append("file",F.file),console.log(s,F.file.size),parseInt(F.file.size/1e3)>1024*100){fe.error("\u6587\u4EF6\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC7100M");return}return x({formData:s,order_status:12,order_id:e.orderId}).then(g=>{console.log("imgList",n.value);let B=g.data;return n.value.push({url:"https://narcissus-me.s3.ap-northeast-1.amazonaws.com/"+B.file_name,name:""}),d.emit("update",n.value.map(f=>f.url)),!0})}}}}),ae=e=>(O("data-v-83537b22"),e=e(),P(),e),He=ae(()=>l("h2",null,"\u4ED8\u6B3E",-1)),Ke=ae(()=>l("div",{class:"desc"},"\u4ED8\u6B3E",-1)),We=["src"];function Ye(e,d,n,A,p,h){const v=y("el-divider"),o=y("Plus"),F=y("el-icon"),s=y("el-upload"),g=y("el-dialog");return t(),b(D,null,[a(v,{"content-position":"left"},{default:u(()=>[He]),_:1}),Ke,l("div",null,[a(s,{"file-list":e.fileList,"http-request":e.subUploadFile,action:"",accept:"","list-type":"picture-card","on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove},{default:u(()=>[a(F,null,{default:u(()=>[a(o)]),_:1})]),_:1},8,["file-list","http-request","on-preview","on-remove"]),a(g,{modelValue:e.dialogVisible,"onUpdate:modelValue":d[0]||(d[0]=B=>e.dialogVisible=B)},{default:u(()=>[l("img",{style:{width:"100%"},src:e.dialogImageUrl,alt:"Preview Image"},null,8,We)]),_:1},8,["modelValue"])])],64)}var xe=R(Xe,[["render",Ye],["__scopeId","data-v-83537b22"]]);const eu=U({components:{},props:{upload:{type:Object},orderId:String},emits:["update"],setup(e,d){const n=JSON.parse(localStorage.getItem("userInfo"))||{},A=S([...e.upload.list]),p=S([]),h=(g,B)=>{A.value=B,d.emits("update",A)},v=g=>{const B=new FormData;if(console.log(g),B.append("files",g.file),parseInt(g.file.size/1e3)>1024*100){ElMessage.error("\u6587\u4EF6\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC7100M");return}return de({formData:B,order_status:"DOCUMENT_UPLOADED",order_id:e.orderId}).then(f=>{let k=f.data[0],L={uid:k.create_at,updateTime:k.updateTime,name:k.file_name,url:"https://narcissus-me.s3.ap-northeast-1.amazonaws.com/"+k.file_name,account:n.user_name};return A.value.push(L),d.emit("update",A),!0})},o=()=>{pe({business_type:10,order_status:15}).then(g=>{p.value=g.data,console.log(p)})},F=()=>{p.value.map((g,B)=>{setTimeout(()=>{s("https://narcissus-me.s3.ap-northeast-1.amazonaws.com/"+g.file_name,g.file_name)},B*1e3)})},s=(g,B)=>{const f=document.createElement("a");f.href=g,f.download="download",document.body.appendChild(f),f.click(),document.body.removeChild(f)};return o(),{fileList:A,handleRemove:h,templateList:p,subUploadFile:v,getTemplateList:o,downFile:s,down:F}}}),M=e=>(O("data-v-20a0e73e"),e=e(),P(),e),uu=M(()=>l("h2",null,"\u4E0A\u4F20\u8D44\u6599",-1)),au=M(()=>l("div",{class:"desc"},"\u4E0A\u4F20\u8D44\u6599",-1)),lu={class:"table-container"},tu={class:"table-layout"},ou={class:"table-cell"},nu=M(()=>l("br",null,null,-1)),su=M(()=>l("br",null,null,-1)),ru=M(()=>l("br",null,null,-1));function iu(e,d,n,A,p,h){const v=y("el-divider"),o=y("Document"),F=y("el-button"),s=y("el-upload");return t(),b(D,null,[a(v,{"content-position":"left"},{default:u(()=>[uu]),_:1}),au,l("div",lu,[l("table",tu,[l("tbody",null,[(t(!0),b(D,null,w(e.templateList,(g,B)=>(t(),b("tr",null,[l("td",ou,[a(o,{style:{width:"1.3em",color:"#999","vertical-align":"sub","margin-right":"8px"}}),r(" "+i(g.file_name),1)])]))),256))])]),nu,a(F,{onClick:e.down},{default:u(()=>[r("\u4E0B\u8F7D\u5168\u90E8\u8D44\u6599")]),_:1},8,["onClick"])]),su,ru,a(s,{class:"upload-demo","file-list":e.fileList,"http-request":e.subUploadFile,multiple:"",action:"",accept:"","on-remove":e.handleRemove},{default:u(()=>[a(F,{type:"primary"},{default:u(()=>[r("\u4E0A\u4F20\u8D44\u6599")]),_:1})]),_:1},8,["file-list","http-request","on-remove"])],64)}var du=R(eu,[["render",iu],["__scopeId","data-v-20a0e73e"]]);const pu=U({components:{},props:{upload:{type:Object},orderId:String},setup(e,d){return{fileList:S([...e.upload.list])}}}),J=e=>(O("data-v-395ccd53"),e=e(),P(),e),_u=J(()=>l("h2",null,"\u8D44\u6599\u5BA1\u6838",-1)),cu=J(()=>l("div",{class:"desc"},"\u8D44\u6599\u5BA1\u6838",-1)),mu={class:"table-container"},fu={class:"table-layout"},Fu=J(()=>l("tr",null,[l("td",{class:"table-cell",bgcolor:"#f1f1f1",style:{width:"60px"}},"\u5E8F\u53F7"),l("td",{class:"table-cell",bgcolor:"#f1f1f1"},"\u8D44\u6599\u540D\u79F0"),l("td",{class:"table-cell",bgcolor:"#f1f1f1",style:{width:"80px"}},"\u72B6\u6001"),l("td",{class:"table-cell",bgcolor:"#f1f1f1"},"\u5907\u6CE8")],-1)),yu={class:"table-cell"},bu={class:"table-cell"},vu={class:"table-cell"},gu={class:"table-cell"},hu={key:0};function Eu(e,d,n,A,p,h){const v=y("el-divider");return t(),b(D,null,[a(v,{"content-position":"left"},{default:u(()=>[_u]),_:1}),cu,l("div",mu,[l("table",fu,[l("tbody",null,[Fu,(t(!0),b(D,null,w(e.fileList,(o,F)=>(t(),b("tr",null,[l("td",yu,i(F+1),1),l("td",bu,i(o.name),1),l("td",vu,i(o.status==1?"\u901A\u8FC7":o.status==-1?"\u4E0D\u901A\u8FC7":"\u5BA1\u6838\u4E2D"),1),l("td",gu,[o.status==-1?(t(),b("span",hu,i(o.reason),1)):m("",!0)])]))),256))])])])],64)}var Du=R(pu,[["render",Eu],["__scopeId","data-v-395ccd53"]]);const Au=U({components:{},props:{sign:{type:Object},orderId:String},emits:["update"],setup(e,d){const n=S([]);e.sign.imageList&&e.sign.imageList.map(v=>{n.value.push({url:v})});const A=S(e.sign);console.log("sign",e);let p="\u6CE8\uFF1A\u8BF7\u5728";return A.value.mark.map((v,o)=>{let F=v.page,s=v.desc;p+="\u7B2C"+F+"\u9875",p+=s+"\u5904",o<A.value.mark.length-1&&(p+="\u3001")}),p+="\u7B7E\u5B57\u540E\u626B\u63CF\u590D\u5370\u4EF6\u6216\u624B\u673A\u62CD\u7167\u4E0A\u4F20",S(""),S(!1),{fileList:n,sign:A,mark:p,subUploadFile:v=>{console.log(v);const o=new FormData;if(o.append("file",v.file),console.log(o,v.file.size),parseInt(v.file.size/1e3)>1024*100){ElMessage.error("\u6587\u4EF6\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC7100M");return}return x({formData:o,order_status:17,order_id:e.orderId}).then(F=>{console.log("imgList",n.value);let s=F.data;return n.value.push({url:"https://narcissus-me.s3.ap-northeast-1.amazonaws.com/"+s.file_name,name:""}),d.emit("update",n.value.map(g=>g.url)),!0})}}}}),q=e=>(O("data-v-db49970a"),e=e(),P(),e),Cu=q(()=>l("h2",null,"\u56DE\u4F20\u7B7E\u5B57",-1)),Bu=q(()=>l("div",{class:"desc"},"\u4EE5\u4E0B\u662F\u56DE\u4F20\u7B7E\u5B57\u8D44\u6599PDF\u6587\u4EF6\uFF0C\u4E0B\u8F7D\u8BF7\u6309\u8981\u6C42\u7B7E\u5B57",-1)),$u={class:"table-container"},ku={class:"table-layout"},Iu={class:"table-cell"},wu=["href"],Tu=q(()=>l("br",null,null,-1)),Su=q(()=>l("br",null,null,-1)),Lu=q(()=>l("br",null,null,-1)),Vu=["src"];function Uu(e,d,n,A,p,h){const v=y("el-divider"),o=y("Document"),F=y("el-alert"),s=y("Plus"),g=y("el-icon"),B=y("el-upload"),f=y("el-dialog");return t(),b(D,null,[a(v,{"content-position":"left"},{default:u(()=>[Cu]),_:1}),Bu,l("div",$u,[l("table",ku,[l("tbody",null,[l("tr",null,[l("td",Iu,[a(o,{style:{width:"1.3em",color:"#999","vertical-align":"sub","margin-right":"8px"}}),r(" "+i(e.sign.pdfPath)+" ",1),l("a",{href:"https://narcissus-me.s3.ap-northeast-1.amazonaws.com/"+e.sign.pdfPath,download:"download"},"\u4E0B\u8F7D",8,wu)])])])])]),Tu,Su,a(F,{title:e.mark,type:"info"},null,8,["title"]),Lu,l("div",null,[a(B,{"file-list":e.fileList,action:"","http-request":e.subUploadFile,"list-type":"picture-card","on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove},{default:u(()=>[a(g,null,{default:u(()=>[a(s)]),_:1})]),_:1},8,["file-list","http-request","on-preview","on-remove"]),a(f,{modelValue:e.dialogVisible,"onUpdate:modelValue":d[0]||(d[0]=k=>e.dialogVisible=k)},{default:u(()=>[l("img",{"w-full":"",src:e.dialogImageUrl,style:{width:"100%"},alt:"Preview Image"},null,8,Vu)]),_:1},8,["modelValue"])])],64)}var Ou=R(Au,[["render",Uu],["__scopeId","data-v-db49970a"]]);const Pu=U({components:{},props:{backSign:{type:Array}},setup(e,d){return e.backSign}}),le=e=>(O("data-v-045229f8"),e=e(),P(),e),Ru=le(()=>l("h2",null,"\u7B7E\u56DE",-1)),Nu=le(()=>l("div",{class:"desc"},"\u7B7E\u56DE\u56FE\u7247",-1)),Mu={class:"demo-image__lazy"};function qu(e,d,n,A,p,h){const v=y("el-divider"),o=y("el-image");return t(),b(D,null,[a(v,{"content-position":"left"},{default:u(()=>[Ru]),_:1}),Nu,l("div",Mu,[(t(!0),b(D,null,w(e.backSign,F=>(t(),c(o,{key:F,src:F,lazy:""},null,8,["src"]))),128))])],64)}var zu=R(Pu,[["render",qu],["__scopeId","data-v-045229f8"]]);const ju=U({components:{},props:{detail:{type:Object}},emits:["update"],setup(e,d){const{order:n,invoice:A,pay:p,upload:h,sign:v,backSign:o}=e.detail;let F="\u6CE8\uFF1A\u8BF7\u5728";return v.mark.map((s,g)=>{let B=s.page,f=s.desc;F+="\u7B2C"+B+"\u9875",F+=f+"\u5904",g<v.mark.length-1&&(F+="\u3001")}),F+="\u7B7E\u5B57\u540E\u626B\u63CF\u590D\u5370\u4EF6\u6216\u624B\u673A\u62CD\u7167\u4E0A\u4F20",{order:n,pay:p,invoice:A,upload:h,sign:v,mark:F,backSign:o}}}),N=e=>(O("data-v-7000f348"),e=e(),P(),e),Zu=N(()=>l("h2",null,"\u5B8C\u7ED3",-1)),Gu=N(()=>l("div",{class:"desc"},"\u5404\u4E1A\u52A1\u8282\u70B9\u8BE6\u60C5\u5185\u5BB9",-1)),Ju={class:"desc"},Qu={key:0},Xu={key:1},Hu={class:"total-price"},Ku=N(()=>l("span",null,"\u5408\u8BA1\uFF1A",-1)),Wu={class:"price"},Yu={class:"total-price"},xu=N(()=>l("span",null,"\u5408\u8BA1\uFF1A",-1)),ea={class:"price"},ua={class:"demo-image__preview"},aa={class:"table-container"},la={class:"table-layout"},ta=N(()=>l("tr",null,[l("td",{class:"table-cell",bgcolor:"#f1f1f1",style:{width:"60px"}},"\u5E8F\u53F7"),l("td",{class:"table-cell",bgcolor:"#f1f1f1"},"\u8D44\u6599\u540D\u79F0"),l("td",{class:"table-cell",bgcolor:"#f1f1f1",style:{width:"80px"}},"\u72B6\u6001"),l("td",{class:"table-cell",bgcolor:"#f1f1f1"},"\u5907\u6CE8")],-1)),oa={class:"table-cell"},na={class:"table-cell"},sa={class:"table-cell"},ra={class:"table-cell"},ia={key:0},da={class:"table-container"},pa={class:"table-layout"},_a=N(()=>l("td",{class:"table-cell",style:{width:"60px"}},"\u8D44\u6599",-1)),ca={class:"table-cell"},ma=["href"],fa=N(()=>l("br",null,null,-1)),Fa=N(()=>l("br",null,null,-1)),ya=N(()=>l("br",null,null,-1)),ba=N(()=>l("div",null,null,-1));function va(e,d,n,A,p,h){const v=y("el-divider"),o=y("el-descriptions-item"),F=y("el-descriptions"),s=y("el-image"),g=y("Document"),B=y("el-alert");return t(),b(D,null,[a(v,{"content-position":"left"},{default:u(()=>[Zu]),_:1}),Gu,l("div",null,[a(v,{"content-position":"left"},{default:u(()=>[r("\u786E\u8BA4\u62A5\u4EF7")]),_:1}),l("div",Ju,[a(F,{title:"\u8BA2\u5355\u53F7"+e.order.id,column:2},{default:u(()=>[a(o,{span:2,label:"\u6240\u5728\u5DDE\uFF1A"},{default:u(()=>[r(i(e.order.regionText),1)]),_:1}),a(o,{span:2,label:"\u516C\u53F8\u7C7B\u578B\uFF1A"},{default:u(()=>[r(i(e.order.companyType==1?"C":"LLC"),1)]),_:1}),e.order.companyType==2?(t(!0),b(D,{key:0},w(e.order.ruleListDataLLC,f=>(t(),b(D,null,[f.field_name=="is_c_rule"?(t(),c(o,{key:0,label:"\u662F\u5426\u6309\u7167C\u516C\u53F8\u65B9\u5F0F\u7EB3\u7A0E\uFF1A",span:2},{default:u(()=>[r(i(e.order.is_c_rule?"\u662F":"\u5426"),1)]),_:1})):m("",!0),e.order.is_c_rule?(t(),b(D,{key:1},[f.field_name=="first_year"?(t(),c(o,{key:0,label:"\u662F\u5426\u7B2C\u4E00\u5E74\u7EB3\u7A0E\uFF1A"},{default:u(()=>[r(i(e.order.first_year?"\u662F":"\u5426"),1)]),_:1})):m("",!0),f.field_name=="first_year"?(t(),c(o,{key:1,label:"\u8D39\u7528\uFF1A"},{default:u(()=>[e.order.first_year?(t(),b("span",Qu,i(f.price),1)):(t(),b("span",Xu,"0"))]),_:2},1024)):m("",!0)],64)):(t(),b(D,{key:2},[f.field_name=="has_us_tax_no"?(t(),c(o,{key:0,span:2,label:"\u662F\u5426\u6709\u7F8E\u56FD\u7A0E\u53F7\uFF1A"},{default:u(()=>[r(i(e.order.has_us_tax_no?"\u662F":"\u5426"),1)]),_:1})):m("",!0),e.order.has_us_tax_no?m("",!0):(t(),b(D,{key:1},[f.field_name=="apply_individual"&&e.order.taxType=="apply_individual"?(t(),c(o,{key:0,label:"\u7533\u8BF7\u7A0E\u53F7\u7C7B\u578B\uFF1A"},{default:u(()=>[r("\u4E2A\u4EBA\u80A1\u4E1C")]),_:1})):m("",!0),f.field_name=="apply_individual"&&e.order.taxType=="apply_individual"?(t(),c(o,{key:1,label:"\u8D39\u7528\uFF1A"},{default:u(()=>[r(i(f.price),1)]),_:2},1024)):m("",!0),f.field_name=="apply_company"&&e.order.taxType=="apply_company"?(t(),c(o,{key:2,label:"\u7533\u8BF7\u7A0E\u53F7\u7C7B\u578B\uFF1A"},{default:u(()=>[r("\u516C\u53F8\u80A1\u4E1C")]),_:1})):m("",!0),f.field_name=="apply_company"&&e.order.taxType=="apply_company"?(t(),c(o,{key:3,label:"\u8D39\u7528\uFF1A"},{default:u(()=>[r(i(f.price)+"\u7F8E\u5143",1)]),_:2},1024)):m("",!0)],64))],64))],64))),256)):m("",!0),a(o,{label:"\u4E3B\u8425\u4E1A\u52A1\u6536\u5165\uFF1A"},{default:u(()=>[r(i(e.order.companyMainIncome.rule_content)+"\u4E07\u7F8E\u5143",1)]),_:1}),a(o,{label:"\u8D39\u7528\uFF1A"},{default:u(()=>[r(i(e.order.companyMainIncome.price||0)+"\u7F8E\u5143",1)]),_:1}),a(o,{span:2,label:"\u4E3B\u8425\u4E1A\u52A1\u7C7B\u578B\uFF1A"},{default:u(()=>[r(i(e.order.main_business_type),1)]),_:1}),a(o,{span:2,label:"\u516C\u53F8\u8D44\u4EA7\u603B\u989D\uFF1A"},{default:u(()=>[r(i(e.order.total_asset),1)]),_:1}),(t(!0),b(D,null,w(e.order.ruleListDataC,f=>(t(),b(D,null,[f.field_name=="amount_fixed_asset"?(t(),c(o,{key:0,label:"\u56FA\u5B9A\u8D44\u4EA7\u91D1\u989D\uFF1A"},{default:u(()=>[r(i(e.order.amount_fixed_asset||0)+"\u4E07\u7F8E\u5143",1)]),_:1})):m("",!0),f.field_name=="amount_fixed_asset"?(t(),c(o,{key:1,label:"\u8D39\u7528\uFF1A"},{default:u(()=>[r(i(e.order.amount_fixed_asset>0?f.price:0)+"\u7F8E\u5143",1)]),_:2},1024)):m("",!0),f.field_name=="exchange_fund_com_number"?(t(),c(o,{key:2,label:"\u8D44\u91D1\u5F80\u6765\u516C\u53F8\u6570\uFF1A"},{default:u(()=>[r(i(e.order.exchange_fund_com_number),1)]),_:1})):m("",!0),f.field_name=="exchange_fund_com_number"?(t(),c(o,{key:3,label:"\u8D39\u7528\uFF1A"},{default:u(()=>[r(i((e.order.exchange_fund_com_number||0)*f.price)+"\u7F8E\u5143",1)]),_:2},1024)):m("",!0),f.field_name=="subsidiary_us"?(t(),c(o,{key:4,label:"\u5728\u7F8E\u5B50\u516C\u53F8\u6570\uFF1A"},{default:u(()=>[r(i(e.order.subsidiary_us),1)]),_:1})):m("",!0),f.field_name=="subsidiary_us"?(t(),c(o,{key:5,label:"\u8D39\u7528\uFF1A"},{default:u(()=>[r(i((e.order.subsidiary_us||0)*f.price||0)+"\u7F8E\u5143",1)]),_:2},1024)):m("",!0),f.field_name=="subsidiary_non_us_number"?(t(),c(o,{key:6,label:"\u975E\u7F8E\u5B50\u516C\u53F8\uFF1A"},{default:u(()=>[r(i(e.order.subsidiary_non_us_number),1)]),_:1})):m("",!0),f.field_name=="subsidiary_non_us_number"?(t(),c(o,{key:7,label:"\u8D39\u7528\uFF1A"},{default:u(()=>[r(i((e.order.subsidiary_non_us_number||0)*f.price||0)+"\u7F8E\u5143",1)]),_:2},1024)):m("",!0)],64))),256))]),_:1},8,["title"]),l("div",null,[l("span",Hu,[Ku,l("span",Wu,"$"+i(e.order.totalPrice),1)])])]),a(v,{"content-position":"left"},{default:u(()=>[r("\u51FA\u5177\u53D1\u7968")]),_:1}),l("div",null,[a(F,{column:1},{default:u(()=>[a(o,{label:"\u5BA2\u6237\u5355\u4F4D\u540D\u5B57\uFF1A"},{default:u(()=>[r(i(e.invoice.agentName),1)]),_:1}),a(o,{label:"\u670D\u52A1\u516C\u53F8\u540D\u5B57\uFF1A"},{default:u(()=>[r(i(e.invoice.companyName),1)]),_:1}),a(o,{label:"\u670D\u52A1\u5185\u5BB9\uFF1A"},{default:u(()=>[r(i(e.invoice.content),1)]),_:1}),a(o,{label:"\u90AE\u7BB1\uFF1A"},{default:u(()=>[r(i(e.invoice.email),1)]),_:1})]),_:1}),l("div",null,[l("span",Yu,[xu,l("span",ea,"$"+i(e.invoice.price),1)])])]),a(v,{"content-position":"left"},{default:u(()=>[r("\u4ED8\u6B3E")]),_:1}),l("div",ua,[(t(!0),b(D,null,w(e.pay.voucher,(f,k)=>(t(),c(s,{style:{width:"100px",height:"100px",margin:"5px"},src:f,"zoom-rate":1.2,"max-scale":7,"min-scale":.2,"preview-src-list":e.pay.voucher,"initial-index":k,fit:"cover"},null,8,["src","preview-src-list","initial-index"]))),256))]),a(v,{"content-position":"left"},{default:u(()=>[r("\u6750\u6599\u5BA1\u6838")]),_:1}),l("div",aa,[l("table",la,[l("tbody",null,[ta,(t(!0),b(D,null,w(e.upload.list,(f,k)=>(t(),b("tr",null,[l("td",oa,i(k+1),1),l("td",na,i(f.name),1),l("td",sa,i(f.status==1?"\u901A\u8FC7":f.status==-1?"\u4E0D\u901A\u8FC7":"\u5BA1\u6838\u4E2D"),1),l("td",ra,[f.status==-1?(t(),b("span",ia,i(f.reason),1)):m("",!0)])]))),256))])])]),a(v,{"content-position":"left"},{default:u(()=>[r("\u56DE\u4F20\u7B7E\u5B57")]),_:1}),l("div",da,[l("table",pa,[l("tbody",null,[l("tr",null,[_a,l("td",ca,[a(g,{style:{width:"1.3em",color:"#999","vertical-align":"sub","margin-right":"8px"}}),r(" "+i(e.sign.pdfPath)+" ",1),l("a",{href:"https://narcissus-me.s3.ap-northeast-1.amazonaws.com/"+e.sign.pdfPath,download:"download"},"\u4E0B\u8F7D",8,ma)])])])]),fa,a(B,{title:e.mark,type:"info"},null,8,["title"]),Fa,(t(!0),b(D,null,w(e.sign.imageList,(f,k)=>(t(),c(s,{style:{width:"100px",margin:"5px"},src:f,"zoom-rate":1.2,"max-scale":7,"min-scale":.2,"preview-src-list":e.sign.imageList,"initial-index":k,fit:"cover"},null,8,["src","preview-src-list","initial-index"]))),256))]),a(v,{"content-position":"left"},{default:u(()=>[r("\u7B7E\u56DE")]),_:1}),l("div",null,[ya,(t(!0),b(D,null,w(e.backSign,(f,k)=>(t(),c(s,{style:{width:"100px"},src:f,"zoom-rate":1.2,"max-scale":7,"min-scale":.2,"preview-src-list":e.backSign,"initial-index":k,fit:"cover"},null,8,["src","preview-src-list","initial-index"]))),256))]),ba])],64)}var ga=R(ju,[["render",va],["__scopeId","data-v-7000f348"]]);const ha=e=>(O("data-v-c1313930"),e=e(),P(),e),Ea={class:"container box"},Da={class:"formArea"},Aa={style:{"margin-top":"15px"}},Ca=ha(()=>l("br",null,null,-1)),Ba=U({__name:"index",setup(e){const d=ne();d.currentRoute.value.query.type;const n=S(d.currentRoute.value.query.orderId),A=JSON.parse(localStorage.getItem("userInfo"));z([{name:"QUOTATION_STARTED",val:10},{name:"QUOTATION_CONFIRMED",val:11},{name:"INVOICE_ISSUED",val:12},{name:"PAID",val:13},{name:"NO_PAID_CONTINUE",val:14},{name:"DOCUMENT_UPLOADED",val:15},{name:"DOCUMENT_REVIEWED",val:16},{name:"SIGNATURE_RETURNED",val:16},{name:"SIGNATURE_RETURNED_BACK",val:17},{name:"FINISHED",val:18},{name:"DELETED",val:99}]);let p=z({order:{ruleListDataC:[],ruleListDataLLC:[],selectRegion:"",regionText:"",companyType:"",mainBusinessIncome:{type:"",inUSchildCompany:2,noUSchildCompany:1},companyMainIncome:{price:0},main_business_type:"",total_asset:"",fixedAssetAmount:"",isMoneyTrading:!0,isChildCompany:!0,isConfirm:!1},invoice:{agentName:A.agent,companyName:A.company_name,content:"",price:0,email:A.email},pay:{voucher:[]},upload:{list:[]},sign:{pdfPath:"",mark:[{page:"22",desc:"\u53F3\u4E0B\u65B9\u7B7E\u540D"},{page:"23",desc:"\u5DE6\u4E0B\u65B9\u7B7E\u540D"}],isSign:!0},backSign:[],isDone:!1});const h=S(0),v=()=>{h.value--<=0&&(h.value=0)},o=()=>{h.value==0&&n.value==null?F():h.value++>7&&(h.value=0)},F=()=>{_e({businessType:10,creator:A.uid,content:p}).then(E=>{n.value=E.data.order_id,h.value=h.value+1,p.order.id=E.data.order_id}).catch(E=>{console.log(E)})},s=()=>{if(h.value==0&&n.value==null){F();return}ce({orderId:n.value,data:{creator:A.uid,content:p}}).then(E=>{console.log("update order",E)}).catch(E=>{console.log(E)})},g=E=>{p.order={...p.order,...E}},B=E=>{p.invoice.price=E},f=E=>{p.invoice=E},k=E=>{p.pay.voucher=E},L=E=>{p.upload.list=E},C=E=>{p.sign.imageList=E},$=()=>{me({order_id:n.value}).then(E=>{const _=JSON.parse(E.data.content);p.order.id=n.value,p.order={...p.order,..._.order},p.invoice={...p.invoice,..._.invoice},p.pay={...p.pay,..._.pay},p.upload={...p.upload,..._.upload},p.sign={...p.sign,..._.sign},p.backSign=_.backSign,p.isDone=_.isDone}).catch(E=>{console.log(E)})};return K(()=>{n.value!==void 0&&$()}),(E,_)=>{const I=y("el-step"),T=y("el-steps"),Q=y("el-col"),te=y("el-card"),Z=y("el-button"),oe=y("el-row");return t(),b("div",Ea,[a(oe,null,{default:u(()=>[a(Q,{span:24},{default:u(()=>[a(T,{active:h.value,"finish-status":"success","align-center":""},{default:u(()=>[a(I,{title:"\u62A5\u4EF7",description:"description"}),a(I,{title:"\u786E\u8BA4\u62A5\u4EF7",description:"description"}),a(I,{title:"\u51FA\u5177\u53D1\u7968",description:"description"}),a(I,{title:"\u4ED8\u6B3E",description:"description"}),a(I,{title:"\u4E0A\u4F20\u8D44\u6599",description:"description"}),a(I,{title:"\u5BA1\u6838\u8D44\u6599",description:"description"}),a(I,{title:"\u56DE\u4F20\u7B7E\u5B57",description:"description"}),a(I,{title:"\u7B7E\u56DE",description:"description"}),a(I,{title:"\u5B8C\u7ED3",description:"description"})]),_:1},8,["active"])]),_:1}),a(Q,{span:24},{default:u(()=>[l("div",Da,[a(te,null,{default:u(()=>[h.value==0?(t(),c(Te,{key:0,ref:"step",order:V(p).order,invoice:V(p).invoice,onUpdate:g},null,8,["order","invoice"])):m("",!0),h.value==1?(t(),c(qe,{key:1,ref:"step",order:V(p).order,onUpdate:B},null,8,["order"])):m("",!0),h.value==2?(t(),c(Qe,{key:2,ref:"step",invoice:V(p).invoice,onUpdate:f},null,8,["invoice"])):m("",!0),h.value==3?(t(),c(xe,{key:3,ref:"step",pay:V(p).pay,onUpdate:k,orderId:n.value},null,8,["pay","orderId"])):m("",!0),h.value==4?(t(),c(du,{key:4,ref:"step",upload:V(p).upload,onUpdate:L,orderId:n.value},null,8,["upload","orderId"])):m("",!0),h.value==5?(t(),c(Du,{key:5,ref:"step",upload:V(p).upload},null,8,["upload"])):m("",!0),h.value==6?(t(),c(Ou,{key:6,ref:"step",orderId:n.value,sign:V(p).sign,onUpdate:C},null,8,["orderId","sign"])):m("",!0),h.value==7?(t(),c(zu,{key:7,ref:"step",backSign:V(p).backSign},null,8,["backSign"])):m("",!0),h.value==8?(t(),c(ga,{key:8,detail:V(p),orderId:n.value},null,8,["detail","orderId"])):m("",!0)]),_:1}),l("div",Aa,[a(Z,{onClick:v},{default:u(()=>[r("\u4E0A\u4E00\u6B65")]),_:1}),a(Z,{onClick:_[0]||(_[0]=$a=>s())},{default:u(()=>[r("\u4FDD\u5B58")]),_:1}),h.value!=8?(t(),c(Z,{key:0,onClick:o},{default:u(()=>[r(i(h.value==1&&n.value==null?"\u521B\u5EFA\u8BA2\u5355":"\u4E0B\u4E00\u6B65"),1)]),_:1})):m("",!0)])])]),_:1})]),_:1}),Ca])}}});var sl=R(Ba,[["__scopeId","data-v-c1313930"]]);export{sl as default};
