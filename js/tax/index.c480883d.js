import{u as Y}from"../vue-router/vue-router.4618ca24.js";import{d as V,Z,e as S,h as x,i as ee,f as Q,_ as ue,ag as y,o as t,c as g,U as l,O as u,F as D,a7 as w,M as m,a,S as r,T as i,R as _,P as de,V as pe,a2 as ae,bl as U,bk as O,u as L}from"../@vue/@vue.91badbb5.js";import{b as ce,r as W}from"../pub/pub.e1972a27.js";import{_ as P}from"../../assets/index.9f47cedf.js";import{u as te,a as _e,g as me,b as fe,c as Fe,d as ye,e as ve}from"../order/order.9450c873.js";import{E as be}from"../element-plus/element-plus.7433ebda.js";import"../Http/Http.fa37c74c.js";import"../axios/axios.3ae77db0.js";import"../nprogress/nprogress.6998436e.js";import"../@intlify/@intlify.223376e2.js";import"../auth/auth.28781c65.js";import"../js-cookie/js-cookie.0390a690.js";import"../pinia/pinia.77f0a8dc.js";import"../vue-demi/vue-demi.4f3c4c97.js";import"../vue-i18n/vue-i18n.be0cd90f.js";import"../vue/vue.c5048f59.js";import"../echarts/echarts.00da4ec3.js";import"../tslib/tslib.e35f93b8.js";import"../zrender/zrender.643dc830.js";import"../vue-json-viewer/vue-json-viewer.da850f6b.js";import"../clipboard/clipboard.e72d304d.js";import"../@element-plus/@element-plus.8ca26a4d.js";import"../pinia-plugin-persistedstate/pinia-plugin-persistedstate.54412c64.js";import"../lodash-es/lodash-es.d3b5e6f4.js";import"../@vueuse/@vueuse.2a62804a.js";import"../@popperjs/@popperjs.f1fb8f77.js";import"../@ctrl/@ctrl.9c8f424f.js";import"../dayjs/dayjs.074df034.js";import"../async-validator/async-validator.21881447.js";import"../memoize-one/memoize-one.f0fba034.js";import"../escape-html/escape-html.d572c0fd.js";import"../normalize-wheel-es/normalize-wheel-es.94de1731.js";import"../@floating-ui/@floating-ui.ded716ca.js";const ge=V({components:{},props:{orderId:0,orderStatus:null,order:{type:Object},invoice:{type:Object}},emits:["update"],setup(e,d){const b=Y(),f=Z({formData:{ruleListDataC:[],ruleListDataLLC:[],selectRegion:"",regionText:"",companyType:"",companyMainIncome:{price:0},mainBusinessIncome:{type:"",inUSchildCompany:2,noUSchildCompany:1},mainBusinessType:"",totalCompanyAssets:"",fixedAssetAmount:"",isMoneyTrading:!0,isChildCompany:!0,isConfirm:!0,amount_fixed_asset:0,exchange_fund_com_number:0,subsidiary_us:0,subsidiary_non_us_number:0},selectAreaOptions:[],rules:{mainBusinessType:[{required:!0,message:"\u5B57\u6BB5\u503C\u4E0D\u53EF\u4E3A\u7A7A"},{pattern:/^[-]?\d+(\.\d+)?$/,trigger:["blur","change"],message:""}],totalAsset:[{required:!0,message:"\u5B57\u6BB5\u503C\u4E0D\u53EF\u4E3A\u7A7A"},{pattern:/^[-]?\d+(\.\d+)?$/,trigger:["blur","change"],message:""}],fixedAssetAmount:[{required:!0,message:"\u5B57\u6BB5\u503C\u4E0D\u53EF\u4E3A\u7A7A"},{pattern:/^[-]?\d+(\.\d+)?$/,trigger:["blur","change"],message:""}]},noUSAOptions:[{label:"\u975E\u7F8E\u56FD",value:1}],incTypeOptions:[{label:"C\u516C\u53F8",value:1},{label:"LLC",value:2}],businessTypeOptions:[{label:"\u9009\u62E9",value:1,income:"0",price:260,remark:"0\u8D44\u4EA7\u8FD0\u8425",area:"\u7279\u62C9\u534E\u5DDE \u534E\u76DB\u987F  \u4F5B\u7F57\u91CC\u8FBE"},{label:"\u9009\u62E9",value:2,income:"0",price:300,remark:"\u5305\u62EC\u7B80\u5355\u8C03\u8D26",area:"\u5176\u4ED6\u5DDE"},{label:"\u9009\u62E9",value:3,income:"25",price:400,remark:"",area:""},{label:"\u9009\u62E9",value:4,income:"25-100",price:600,remark:"",area:""},{label:"\u9009\u62E9",value:5,income:"100-200",price:700,remark:"",area:""},{label:"\u9009\u62E9",value:6,income:"200-500",price:800,remark:"",area:""}],isFlowOptions:[{label:"\u662F",value:1},{label:"\u5426",value:0}],isChildOptions:[{label:"\u662F",value:1},{label:"\u5426",value:0}]}),c=S({price:0});f.formData=e.order;const B=()=>{d.emit("update",f.formData)},s=x(),o=()=>{s.proxy.$refs.vForm.validate(A=>{})},v=()=>{s.proxy.$refs.vForm.resetFields()},n=()=>{ce().then(A=>{console.log("\u5168\u90E8\u5DDE",A),f.selectAreaOptions=A.data}).catch(A=>{console.log(A)})},h=()=>{let A=f.formData.selectRegion;W({page:1,count:20,businessType:10,region:A,company_type:"C"}).then(p=>{const k=p.data.toSorted((E,N)=>E.order>N.order?1:-1);f.formData.ruleListDataC=k}),W({page:1,count:20,businessType:10,region:A,company_type:"LLC"}).then(p=>{const k=p.data.toSorted((E,N)=>E.order>N.order?1:-1);f.formData.ruleListDataLLC=k})},C=()=>{},F=()=>{},$=()=>{f.formData.ruleListDataC=ruleListDataCCCache.value.sort(A=>A.company_type==type)},T=A=>{f.formData.companyMainIncome=A},M=()=>{let A=0;if(f.formData.ruleListDataC.map(p=>{p.vale_type=="TEXT_MULTIPLY"?A+=(f.formData[p.field_name]||0)*p.price:p.vale_type=="TEXT_GREATER"&&f.formData[p.field_name]>Number(p.rule_content)&&(A+=p.price)}),f.formData.companyType==2){if(f.formData.is_c_rule){if(f.formData.first_year){let p=f.formData.ruleListDataLLC.find(k=>k.field_name==="first_year");p&&(A+=p.price)}}else if(!f.formData.has_us_tax_no){let p=f.formData.ruleListDataLLC.find(k=>k.field_name===f.formData.taxType);p&&(A+=p.price)}}return f.formData.totalPrice=A+f.formData.companyMainIncome.price,e.invoice.price=f.formData.totalPrice,A+f.formData.companyMainIncome.price},q=()=>{let A={type:10,desc:"\u62A5\u7A0E"};e.orderId&&(A.orderId=e.orderId),e.orderStatus&&(A.orderStatus=e.orderStatus),b.push({name:"customerService",query:A})};return ee(()=>{n(),h()}),Q(()=>f.formData.selectRegion,A=>{let p=f.selectAreaOptions.find(k=>k.code==A)||{};f.formData.regionText=p.name}),Q(()=>f.formData.selectRegion,A=>{h()}),Q(()=>e.order,A=>{f.formData=A}),{...ue(f),companyMainIncome:c,saveOrder:B,submitForm:o,resetForm:v,regionChange:C,companyTypeChange:F,companyTypeChange:F,companyMainIncomeChange:T,order:$,computedTotalPrice:M,cs:q}}}),G=e=>(U("data-v-8dd7d1c4"),e=e(),O(),e),he=G(()=>a("h2",null,"\u62A5\u4EF7",-1)),Ee=G(()=>a("div",{class:"desc"},"\u9009\u62E9\u60A8\u60F3\u8981\u7684\u5DDE\u548C\u4E1A\u52A1\u7C7B\u578B\uFF0C\u7136\u540E\u9009\u62E9\u60A8\u7684\u9644\u52A0\u7EC4\u4EF6\u4EE5\u5F00\u59CB\u60A8\u7684\u8BA2\u5355",-1)),De={class:"total-price"},Ae={class:"price"},Ce={class:"table-container"},Be={class:"table-layout"},$e=G(()=>a("tr",null,[a("td",{class:"table-cell",bgcolor:"#f1f1f1",style:{width:"80px"}},"\u9009\u9879"),a("td",{class:"table-cell",bgcolor:"#f1f1f1",style:{width:"100px"}},"\u6536\u5165(\u7F8E\u91D1)"),a("td",{class:"table-cell",bgcolor:"#f1f1f1",style:{width:"100px"}},"\u62A5\u4EF7")],-1)),ke={key:0},Ie={class:"table-cell"},we={class:"table-cell"},Se={class:"table-cell"},Te={class:"price"},Le=G(()=>a("div",{class:"tip"},"\u5173\u8054\u65B9\u5305\u62EC\u6BCD\u516C\u53F8\u3001\u5B50\u516C\u53F8\u6216\u540C\u4E00\u63A7\u5236\u4EBA\u4E0B\u7684\u5176\u4ED6\u5144\u5F1F\u516C\u53F8",-1));function Ve(e,d,b,f,c,B){const s=y("el-divider"),o=y("el-option"),v=y("el-select"),n=y("el-form-item"),h=y("el-col"),C=y("el-row"),F=y("el-radio"),$=y("el-radio-group"),T=y("el-switch"),M=y("el-input"),q=y("el-input-number"),A=y("el-form");return t(),g(D,null,[l(s,{"content-position":"left"},{default:u(()=>[he]),_:1}),Ee,l(A,{model:e.formData,ref:"vForm",rules:e.rules,"label-position":"right","label-width":"180px",size:"default",onSubmit:d[14]||(d[14]=ae(()=>{},["prevent"]))},{default:u(()=>[l(C,null,{default:u(()=>[l(h,{span:16,class:"grid-cell"},{default:u(()=>[l(C,null,{default:u(()=>[l(h,{span:24},{default:u(()=>[l(C,null,{default:u(()=>[l(h,{span:12},{default:u(()=>[l(n,{label:"\u9009\u62E9\u533A\u57DF\uFF1A",prop:"selectRegion",class:"label-right-align"},{default:u(()=>[l(v,{onChange:e.regionChange,modelValue:e.formData.selectRegion,"onUpdate:modelValue":d[0]||(d[0]=p=>e.formData.selectRegion=p),class:"full-width-input",placeholder:"\u8BF7\u9009\u62E9",clearable:""},{default:u(()=>[(t(!0),g(D,null,w(e.selectAreaOptions,(p,k)=>(t(),m(o,{key:k,label:p.name,value:p.code},null,8,["label","value"]))),128))]),_:1},8,["onChange","modelValue"])]),_:1})]),_:1}),l(h,{span:6,style:{"margin-left":"40px"}},{default:u(()=>[a("span",{onClick:d[1]||(d[1]=(...p)=>e.cs&&e.cs(...p))},"\u975E\u7F8E\u56FD")]),_:1})]),_:1})]),_:1}),l(h,{span:24},{default:u(()=>[l(n,{label:"\u516C\u53F8\u7C7B\u578B\uFF1A",prop:"companyType",class:"label-right-align"},{default:u(()=>[l($,{onChange:e.companyChange,modelValue:e.formData.companyType,"onUpdate:modelValue":d[2]||(d[2]=p=>e.formData.companyType=p)},{default:u(()=>[(t(!0),g(D,null,w(e.incTypeOptions,(p,k)=>(t(),m(F,{key:k,label:p.value,disabled:p.disabled,style:{"{\n                      display":"inline"},onChange:E=>e.companyTypeChange(p.value)},{default:u(()=>[r(i(p.label),1)]),_:2},1032,["label","disabled","onChange"]))),128))]),_:1},8,["onChange","modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),l(h,{span:8,class:"grid-cell"},{default:u(()=>[a("div",De,[a("div",null,[r(" \u62A5\u4EF7\uFF1A "),a("span",Ae,"$"+i(e.computedTotalPrice()),1)])])]),_:1})]),_:1}),e.formData.companyType==2&&e.formData.companyType?(t(),m(C,{key:0},{default:u(()=>[l(h,{span:24,class:"grid-cell"},{default:u(()=>[l(n,{label:"\u662F\u5426\u6309\u7167C\u516C\u53F8\u65B9\u5F0F\u7EB3\u7A0E\uFF1A",prop:"is_c_rule",class:"required label-right-align"},{default:u(()=>[l(T,{modelValue:e.formData.is_c_rule,"onUpdate:modelValue":d[3]||(d[3]=p=>e.formData.is_c_rule=p),"active-text":"\u662F","inactive-text":"\u5426"},null,8,["modelValue"])]),_:1}),e.formData.is_c_rule?(t(),m(n,{key:0,label:"\u662F\u5426\u7B2C\u4E00\u5E74\u7EB3\u7A0E\uFF1A",prop:"first_year",class:"required label-right-align"},{default:u(()=>[l(T,{modelValue:e.formData.first_year,"onUpdate:modelValue":d[4]||(d[4]=p=>e.formData.first_year=p),"active-text":"\u662F","inactive-text":"\u5426"},null,8,["modelValue"])]),_:1})):_("",!0),e.formData.is_c_rule?_("",!0):(t(),m(n,{key:1,label:"\u662F\u5426\u6709\u7F8E\u56FD\u7A0E\u53F7\uFF1A",prop:"has_us_tax_no",class:"required label-right-align"},{default:u(()=>[l(T,{modelValue:e.formData.has_us_tax_no,"onUpdate:modelValue":d[5]||(d[5]=p=>e.formData.has_us_tax_no=p),"active-text":"\u662F","inactive-text":"\u5426"},null,8,["modelValue"])]),_:1})),!e.formData.is_c_rule&&!e.formData.has_us_tax_no?(t(),m(n,{key:2,label:"\u7533\u8BF7\u7A0E\u53F7\uFF1A",prop:"has_us_tax_no",class:"required label-right-align"},{default:u(()=>[l(T,{modelValue:e.formData.taxType,"onUpdate:modelValue":d[6]||(d[6]=p=>e.formData.taxType=p),"active-value":"apply_individual","inactive-value":"apply_company","active-text":"\u7533\u8BF7\u4E2A\u4EBA\u7A0E\u53F7","inactive-text":"\u7533\u8BF7\u516C\u53F8\u7A0E\u53F7"},null,8,["modelValue"])]),_:1})):_("",!0)]),_:1})]),_:1})):_("",!0),l(C,null,{default:u(()=>[de(l(h,{span:24,class:"grid-cell"},{default:u(()=>[l(n,{label:"\u516C\u53F8\u4E3B\u8425\u4E1A\u52A1\u6536\u5165\uFF1A",prop:"businessType",class:"label-right-align"},{default:u(()=>[l($,{modelValue:e.formData.mainBusinessIncome.type,"onUpdate:modelValue":d[7]||(d[7]=p=>e.formData.mainBusinessIncome.type=p)},{default:u(()=>[a("div",Ce,[a("table",Be,[a("tbody",null,[$e,(t(!0),g(D,null,w(e.formData.ruleListDataC,(p,k)=>(t(),g(D,null,[p.option?(t(),g("tr",ke,[a("td",Ie,[(t(),m(F,{key:k,label:p.id,style:{"{\n                              display":"inline"},onChange:E=>e.companyMainIncomeChange(p)},{default:u(()=>[r(i(p.label),1)]),_:2},1032,["label","onChange"]))]),a("td",we,i(p.rule_content)+"\u4E07",1),a("td",Se,[a("span",Te,"$"+i(p.price),1)])])):_("",!0)],64))),256))])])])]),_:1},8,["modelValue"])]),_:1})]),_:1},512),[[pe,e.formData.companyType]]),e.formData.companyType?(t(!0),g(D,{key:0},w(e.formData.ruleListDataC,(p,k)=>(t(),g(D,null,[p.option?_("",!0):(t(),m(h,{key:0,span:24,class:"grid-cell"},{default:u(()=>[p.field_name=="main_business_type"?(t(),m(n,{key:0,label:"\u4E3B\u8425\u4E1A\u52A1\u7C7B\u578B\uFF1A",prop:"main_business_type",class:"required label-right-align"},{default:u(()=>[l(M,{modelValue:e.formData.main_business_type,"onUpdate:modelValue":d[8]||(d[8]=E=>e.formData.main_business_type=E),type:"text",clearable:""},null,8,["modelValue"])]),_:1})):_("",!0),p.field_name=="total_asset"?(t(),m(n,{key:1,label:"\u516C\u53F8\u8D44\u4EA7\u603B\u989D\uFF1A",prop:"total_asset",class:"required label-right-align"},{default:u(()=>[l(M,{modelValue:e.formData.total_asset,"onUpdate:modelValue":d[9]||(d[9]=E=>e.formData.total_asset=E),type:"text",clearable:""},{append:u(()=>[r("\u4E07\u7F8E\u5143")]),_:1},8,["modelValue"])]),_:1})):_("",!0),p.field_name=="amount_fixed_asset"?(t(),m(n,{key:2,label:"\u56FA\u5B9A\u8D44\u4EA7\u91D1\u989D\uFF1A",prop:"amount_fixed_asset",class:"required label-right-align"},{default:u(()=>[l(M,{onChange:e.computedTotalPrice,modelValue:e.formData.amount_fixed_asset,"onUpdate:modelValue":d[10]||(d[10]=E=>e.formData.amount_fixed_asset=E),type:"text",clearable:"",placeholder:"\u6CE8\uFF1A\u8D39\u7528\u4E3A"+p.price},{append:u(()=>[r("\u4E07\u7F8E\u5143")]),_:2},1032,["onChange","modelValue","placeholder"])]),_:2},1024)):_("",!0),p.field_name=="exchange_fund_com_number"?(t(),m(n,{key:3,label:"\u8D44\u91D1\u5F80\u6765\u516C\u53F8\u6570\uFF1A",prop:"exchange_fund_com_number",class:"required label-right-align"},{default:u(()=>[l(q,{onChange:e.computedTotalPrice,style:{width:"250px"},min:"0",modelValue:e.formData.exchange_fund_com_number,"onUpdate:modelValue":d[11]||(d[11]=E=>e.formData.exchange_fund_com_number=E),type:"text",clearable:"",placeholder:"\u6CE8\uFF1A\u8D39\u7528\u4E3A\u516C\u53F8\u6570 x "+p.price},null,8,["onChange","modelValue","placeholder"]),Le]),_:2},1024)):_("",!0),p.field_name=="subsidiary_us"?(t(),m(n,{key:4,label:"\u5728\u7F8E\u5B50\u516C\u53F8\u6570\uFF1A",prop:"subsidiary_us",class:"required label-right-align"},{default:u(()=>[l(q,{onChange:e.computedTotalPrice,style:{width:"250px"},min:"0",modelValue:e.formData.subsidiary_us,"onUpdate:modelValue":d[12]||(d[12]=E=>e.formData.subsidiary_us=E),type:"text",clearable:"",placeholder:"\u6CE8\uFF1A\u8D39\u7528\u4E3A\u516C\u53F8\u6570 x "+p.price},null,8,["onChange","modelValue","placeholder"])]),_:2},1024)):_("",!0),p.field_name=="subsidiary_non_us_number"?(t(),m(n,{key:5,label:"\u975E\u7F8E\u5B50\u516C\u53F8\u6570\uFF1A",prop:"subsidiary_non_us_number",class:"required label-right-align"},{default:u(()=>[l(q,{onChange:e.computedTotalPrice,style:{width:"250px"},min:"0",modelValue:e.formData.subsidiary_non_us_number,"onUpdate:modelValue":d[13]||(d[13]=E=>e.formData.subsidiary_non_us_number=E),type:"text",clearable:"",placeholder:"\u6CE8\uFF1A\u8D39\u7528\u4E3A\u516C\u53F8\u6570 x "+p.price},null,8,["onChange","modelValue","placeholder"])]),_:2},1024)):_("",!0)]),_:2},1024))],64))),256)):_("",!0)]),_:1})]),_:1},8,["model","rules"])],64)}var Ue=P(ge,[["render",Ve],["__scopeId","data-v-8dd7d1c4"]]);const Oe=V({components:{},props:{order:{type:Object}},emits:["update"],setup(e,d){return{order:S(e.order)}}}),le=e=>(U("data-v-052162fd"),e=e(),O(),e),Pe=le(()=>a("h2",null,"\u786E\u8BA4\u62A5\u4EF7",-1)),Re={class:"desc"},Ne={key:0},Me={key:1},qe={class:"total-price"},ze=le(()=>a("span",null,"\u5408\u8BA1\uFF1A",-1)),je={class:"price"};function Ze(e,d,b,f,c,B){const s=y("el-divider"),o=y("el-descriptions-item"),v=y("el-descriptions");return t(),g(D,null,[l(s,{"content-position":"left"},{default:u(()=>[Pe]),_:1}),a("div",Re,[l(v,{title:"\u8BA2\u5355\u53F7"+e.order.id,column:2},{default:u(()=>[l(o,{span:2,label:"\u6240\u5728\u5DDE\uFF1A"},{default:u(()=>[r(i(e.order.regionText),1)]),_:1}),l(o,{span:2,label:"\u516C\u53F8\u7C7B\u578B\uFF1A"},{default:u(()=>[r(i(e.order.companyType==1?"C":"LLC"),1)]),_:1}),e.order.companyType==2?(t(!0),g(D,{key:0},w(e.order.ruleListDataLLC,n=>(t(),g(D,null,[n.field_name=="is_c_rule"?(t(),m(o,{key:0,label:"\u662F\u5426\u6309\u7167C\u516C\u53F8\u65B9\u5F0F\u7EB3\u7A0E\uFF1A",span:2},{default:u(()=>[r(i(e.order.is_c_rule?"\u662F":"\u5426"),1)]),_:1})):_("",!0),e.order.is_c_rule?(t(),g(D,{key:1},[n.field_name=="first_year"?(t(),m(o,{key:0,label:"\u662F\u5426\u7B2C\u4E00\u5E74\u7EB3\u7A0E\uFF1A"},{default:u(()=>[r(i(e.order.first_year?"\u662F":"\u5426"),1)]),_:1})):_("",!0),n.field_name=="first_year"?(t(),m(o,{key:1,label:"\u8D39\u7528\uFF1A"},{default:u(()=>[e.order.first_year?(t(),g("span",Ne,i(n.price),1)):(t(),g("span",Me,"0"))]),_:2},1024)):_("",!0)],64)):(t(),g(D,{key:2},[n.field_name=="has_us_tax_no"?(t(),m(o,{key:0,span:2,label:"\u662F\u5426\u6709\u7F8E\u56FD\u7A0E\u53F7\uFF1A"},{default:u(()=>[r(i(e.order.has_us_tax_no?"\u662F":"\u5426"),1)]),_:1})):_("",!0),e.order.has_us_tax_no?_("",!0):(t(),g(D,{key:1},[n.field_name=="apply_individual"&&e.order.taxType=="apply_individual"?(t(),m(o,{key:0,label:"\u7533\u8BF7\u7A0E\u53F7\u7C7B\u578B\uFF1A"},{default:u(()=>[r("\u4E2A\u4EBA\u80A1\u4E1C")]),_:1})):_("",!0),n.field_name=="apply_individual"&&e.order.taxType=="apply_individual"?(t(),m(o,{key:1,label:"\u8D39\u7528\uFF1A"},{default:u(()=>[r(i(n.price),1)]),_:2},1024)):_("",!0),n.field_name=="apply_company"&&e.order.taxType=="apply_company"?(t(),m(o,{key:2,label:"\u7533\u8BF7\u7A0E\u53F7\u7C7B\u578B\uFF1A"},{default:u(()=>[r("\u516C\u53F8\u80A1\u4E1C")]),_:1})):_("",!0),n.field_name=="apply_company"&&e.order.taxType=="apply_company"?(t(),m(o,{key:3,label:"\u8D39\u7528\uFF1A"},{default:u(()=>[r(i(n.price)+"\u7F8E\u5143",1)]),_:2},1024)):_("",!0)],64))],64))],64))),256)):_("",!0),l(o,{label:"\u4E3B\u8425\u4E1A\u52A1\u6536\u5165\uFF1A"},{default:u(()=>[r(i(e.order.companyMainIncome.rule_content)+"\u4E07\u7F8E\u5143",1)]),_:1}),l(o,{label:"\u8D39\u7528\uFF1A"},{default:u(()=>[r(i(e.order.companyMainIncome.price||0)+"\u7F8E\u5143",1)]),_:1}),l(o,{span:2,label:"\u4E3B\u8425\u4E1A\u52A1\u7C7B\u578B\uFF1A"},{default:u(()=>[r(i(e.order.main_business_type),1)]),_:1}),l(o,{span:2,label:"\u516C\u53F8\u8D44\u4EA7\u603B\u989D\uFF1A"},{default:u(()=>[r(i(e.order.total_asset),1)]),_:1}),(t(!0),g(D,null,w(e.order.ruleListDataC,n=>(t(),g(D,{key:n.field_name},[n.field_name=="amount_fixed_asset"?(t(),m(o,{key:0,label:"\u56FA\u5B9A\u8D44\u4EA7\u91D1\u989D\uFF1A"},{default:u(()=>[r(i(e.order.amount_fixed_asset||0)+"\u4E07\u7F8E\u5143",1)]),_:1})):_("",!0),n.field_name=="amount_fixed_asset"?(t(),m(o,{key:1,label:"\u8D39\u7528\uFF1A"},{default:u(()=>[r(i(e.order.amount_fixed_asset>0?n.price:0)+"\u7F8E\u5143",1)]),_:2},1024)):_("",!0),n.field_name=="exchange_fund_com_number"?(t(),m(o,{key:2,label:"\u8D44\u91D1\u5F80\u6765\u516C\u53F8\u6570\uFF1A"},{default:u(()=>[r(i(e.order.exchange_fund_com_number),1)]),_:1})):_("",!0),n.field_name=="exchange_fund_com_number"?(t(),m(o,{key:3,label:"\u8D39\u7528\uFF1A"},{default:u(()=>[r(i((e.order.exchange_fund_com_number||0)*n.price)+"\u7F8E\u5143",1)]),_:2},1024)):_("",!0),n.field_name=="subsidiary_us"?(t(),m(o,{key:4,label:"\u5728\u7F8E\u5B50\u516C\u53F8\u6570\uFF1A"},{default:u(()=>[r(i(e.order.subsidiary_us),1)]),_:1})):_("",!0),n.field_name=="subsidiary_us"?(t(),m(o,{key:5,label:"\u8D39\u7528\uFF1A"},{default:u(()=>[r(i((e.order.subsidiary_us||0)*n.price||0)+"\u7F8E\u5143",1)]),_:2},1024)):_("",!0),n.field_name=="subsidiary_non_us_number"?(t(),m(o,{key:6,label:"\u975E\u7F8E\u5B50\u516C\u53F8\uFF1A"},{default:u(()=>[r(i(e.order.subsidiary_non_us_number),1)]),_:1})):_("",!0),n.field_name=="subsidiary_non_us_number"?(t(),m(o,{key:7,label:"\u8D39\u7528\uFF1A"},{default:u(()=>[r(i((e.order.subsidiary_non_us_number||0)*n.price||0)+"\u7F8E\u5143",1)]),_:2},1024)):_("",!0)],64))),128))]),_:1},8,["title"]),a("div",null,[a("span",qe,[ze,a("span",je,"$"+i(e.order.totalPrice),1)])])])],64)}var Ge=P(Oe,[["render",Ze],["__scopeId","data-v-052162fd"]]);const Je=V({components:{},props:{invoice:{type:Object}},emits:["update"],setup(e,d){const b=Z({formData:{},rules:{email:[{pattern:/^([-_A-Za-z0-9.]+)@([_A-Za-z0-9]+\.)+[A-Za-z0-9]{2,3}$/,trigger:["blur","change"],message:""}]}});b.formData=e.invoice;const f=()=>{d.emit("update",b.formData)},c=x(),B=()=>{c.proxy.$refs.vForm.validate(o=>{})},s=()=>{c.proxy.$refs.vForm.resetFields()};return{...ue(b),submitForm:B,resetForm:s,saveInvoice:f}}}),oe=e=>(U("data-v-ada9d068"),e=e(),O(),e),He=oe(()=>a("h2",null,"\u51FA\u5177\u53D1\u7968",-1)),Qe=oe(()=>a("div",{class:"desc"},"\u51FA\u5177\u53D1\u7968",-1)),Xe={class:"price",style:{"font-size":"30px"}};function Ke(e,d,b,f,c,B){const s=y("el-divider"),o=y("el-form-item"),v=y("el-col"),n=y("el-input"),h=y("el-row"),C=y("el-form");return t(),g(D,null,[l(s,{"content-position":"left"},{default:u(()=>[He]),_:1}),Qe,l(C,{model:e.formData,ref:"vForm",rules:e.rules,"label-position":"right","label-width":"140px",size:"small",onSubmit:d[1]||(d[1]=ae(()=>{},["prevent"]))},{default:u(()=>[l(h,null,{default:u(()=>[l(v,{span:24,class:"grid-cell"},{default:u(()=>[l(o,{label:"\u5BA2\u6237\u5355\u4F4D\u540D\u5B57\uFF1A",prop:"businessIncome",class:"required label-right-align"},{default:u(()=>[r(i(e.formData.agentName),1)]),_:1})]),_:1}),l(v,{span:24,class:"grid-cell"},{default:u(()=>[l(o,{label:"\u670D\u52A1\u516C\u53F8\u540D\u5B57\uFF1A",prop:"total1",class:"required label-right-align"},{default:u(()=>[r(i(e.formData.companyName),1)]),_:1})]),_:1}),l(v,{span:24,class:"grid-cell"},{default:u(()=>[l(o,{label:"\u670D\u52A1\u5185\u5BB9\uFF1A",prop:"total2",class:"required label-right-align"},{default:u(()=>[r(i(e.formData.content),1)]),_:1})]),_:1}),l(v,{span:24,class:"grid-cell"},{default:u(()=>[l(o,{label:"\u90AE\u7BB1\uFF1A",prop:"email",class:"label-right-align"},{default:u(()=>[l(n,{modelValue:e.formData.email,"onUpdate:modelValue":d[0]||(d[0]=F=>e.formData.email=F),placeholder:"\u9ED8\u8BA4\u53D1\u9001\u5230\u6CE8\u518C\u65F6\u7684\u90AE\u7BB1",type:"text",style:{width:"200px"},clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),l(v,{span:24,class:"grid-cell"},{default:u(()=>[l(o,{label:"\u5408\u8BA1\uFF1A",prop:"isChild",class:"label-right-align"},{default:u(()=>[a("span",Xe,"$"+i(e.formData.price),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])],64)}var We=P(Je,[["render",Ke],["__scopeId","data-v-ada9d068"]]);const Ye=V({components:{},props:{pay:{type:Object},orderId:String},emits:["update"],setup(e,d){const b=S([]);b.value=e.pay.voucher.map(v=>({url:v,name:v}));const f=S(""),c=S(!1);return{fileList:b,dialogImageUrl:f,dialogVisible:c,handleRemove:(v,n)=>{b.value=n,d.emit("update",b.value.map(h=>h.url))},handlePictureCardPreview:v=>{f.value=v.url,c.value=!0},subUploadFile:v=>{console.log(v);const n=new FormData;if(n.append("file",v.file),console.log(n,v.file.size),parseInt(v.file.size/1e3)>1024*100){be.error("\u6587\u4EF6\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC7100M");return}return te({formData:n,order_status:12,order_id:e.orderId}).then(h=>{console.log("imgList",b.value);let C=h.data;return b.value.push({url:"https://narcissus-me.s3.ap-northeast-1.amazonaws.com/"+C.file_name,name:""}),d.emit("update",b.value.map(F=>F.url)),!0})}}}}),ne=e=>(U("data-v-83537b22"),e=e(),O(),e),xe=ne(()=>a("h2",null,"\u4ED8\u6B3E",-1)),eu=ne(()=>a("div",{class:"desc"},"\u4ED8\u6B3E",-1)),uu=["src"];function au(e,d,b,f,c,B){const s=y("el-divider"),o=y("Plus"),v=y("el-icon"),n=y("el-upload"),h=y("el-dialog");return t(),g(D,null,[l(s,{"content-position":"left"},{default:u(()=>[xe]),_:1}),eu,a("div",null,[l(n,{"file-list":e.fileList,"http-request":e.subUploadFile,action:"",accept:"","list-type":"picture-card","on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove},{default:u(()=>[l(v,null,{default:u(()=>[l(o)]),_:1})]),_:1},8,["file-list","http-request","on-preview","on-remove"]),l(h,{modelValue:e.dialogVisible,"onUpdate:modelValue":d[0]||(d[0]=C=>e.dialogVisible=C)},{default:u(()=>[a("img",{style:{width:"100%"},src:e.dialogImageUrl,alt:"Preview Image"},null,8,uu)]),_:1},8,["modelValue"])])],64)}var tu=P(Ye,[["render",au],["__scopeId","data-v-83537b22"]]);const lu=V({components:{},props:{upload:{type:Object},orderId:String},emits:["update"],setup(e,d){const b=JSON.parse(localStorage.getItem("userInfo"))||{},f=S([...e.upload.list]),c=S([]),B=(h,C)=>{f.value=C,d.emits("update",f)},s=h=>{const C=new FormData;if(console.log(h),C.append("files",h.file),parseInt(h.file.size/1e3)>1024*100){ElMessage.error("\u6587\u4EF6\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC7100M");return}return _e({formData:C,order_status:15,order_id:e.orderId}).then(F=>{let $=F.data[0],T={uid:$.create_at,updateTime:$.updateTime,name:$.file_name,url:"https://narcissus-me.s3.ap-northeast-1.amazonaws.com/"+$.file_name,account:b.user_name};return f.value.push(T),d.emit("update",f),!0})},o=()=>{me({business_type:10,order_status:15}).then(h=>{c.value=h.data,console.log(c)})},v=()=>{c.value.map((h,C)=>{setTimeout(()=>{n("https://narcissus-me.s3.ap-northeast-1.amazonaws.com/"+h.file_name,h.file_name)},C*1e3)})},n=(h,C)=>{const F=document.createElement("a");F.href=h,F.download="download",document.body.appendChild(F),F.click(),document.body.removeChild(F)};return o(),{fileList:f,handleRemove:B,templateList:c,subUploadFile:s,getTemplateList:o,downFile:n,down:v}}}),z=e=>(U("data-v-275c4aa4"),e=e(),O(),e),ou=z(()=>a("h2",null,"\u4E0A\u4F20\u8D44\u6599",-1)),nu=z(()=>a("div",{class:"desc"},"\u4E0A\u4F20\u8D44\u6599",-1)),su={class:"table-container"},ru={class:"table-layout"},iu={class:"table-cell"},du=z(()=>a("br",null,null,-1)),pu=z(()=>a("br",null,null,-1)),cu=z(()=>a("br",null,null,-1));function _u(e,d,b,f,c,B){const s=y("el-divider"),o=y("Document"),v=y("el-button"),n=y("el-upload");return t(),g(D,null,[l(s,{"content-position":"left"},{default:u(()=>[ou]),_:1}),nu,a("div",su,[a("table",ru,[a("tbody",null,[(t(!0),g(D,null,w(e.templateList,(h,C)=>(t(),g("tr",null,[a("td",iu,[l(o,{style:{width:"1.3em",color:"#999","vertical-align":"sub","margin-right":"8px"}}),r(" "+i(h.file_name),1)])]))),256))])]),du,l(v,{onClick:e.down},{default:u(()=>[r("\u4E0B\u8F7D\u5168\u90E8\u8D44\u6599")]),_:1},8,["onClick"])]),pu,cu,l(n,{class:"upload-demo","file-list":e.fileList,"http-request":e.subUploadFile,multiple:"",action:"",accept:"","on-remove":e.handleRemove},{default:u(()=>[l(v,{type:"primary"},{default:u(()=>[r("\u4E0A\u4F20\u8D44\u6599")]),_:1})]),_:1},8,["file-list","http-request","on-remove"])],64)}var mu=P(lu,[["render",_u],["__scopeId","data-v-275c4aa4"]]);const fu=V({components:{},props:{upload:{type:Object},orderId:String},setup(e,d){return{fileList:S([...e.upload.list])}}}),X=e=>(U("data-v-395ccd53"),e=e(),O(),e),Fu=X(()=>a("h2",null,"\u8D44\u6599\u5BA1\u6838",-1)),yu=X(()=>a("div",{class:"desc"},"\u8D44\u6599\u5BA1\u6838",-1)),vu={class:"table-container"},bu={class:"table-layout"},gu=X(()=>a("tr",null,[a("td",{class:"table-cell",bgcolor:"#f1f1f1",style:{width:"60px"}},"\u5E8F\u53F7"),a("td",{class:"table-cell",bgcolor:"#f1f1f1"},"\u8D44\u6599\u540D\u79F0"),a("td",{class:"table-cell",bgcolor:"#f1f1f1",style:{width:"80px"}},"\u72B6\u6001"),a("td",{class:"table-cell",bgcolor:"#f1f1f1"},"\u5907\u6CE8")],-1)),hu={class:"table-cell"},Eu={class:"table-cell"},Du={class:"table-cell"},Au={class:"table-cell"},Cu={key:0};function Bu(e,d,b,f,c,B){const s=y("el-divider");return t(),g(D,null,[l(s,{"content-position":"left"},{default:u(()=>[Fu]),_:1}),yu,a("div",vu,[a("table",bu,[a("tbody",null,[gu,(t(!0),g(D,null,w(e.fileList,(o,v)=>(t(),g("tr",null,[a("td",hu,i(v+1),1),a("td",Eu,i(o.name),1),a("td",Du,i(o.status==1?"\u901A\u8FC7":o.status==-1?"\u4E0D\u901A\u8FC7":"\u5BA1\u6838\u4E2D"),1),a("td",Au,[o.status==-1?(t(),g("span",Cu,i(o.reason),1)):_("",!0)])]))),256))])])])],64)}var $u=P(fu,[["render",Bu],["__scopeId","data-v-395ccd53"]]);const ku=V({components:{},props:{sign:{type:Object},orderId:String},emits:["update"],setup(e,d){const b=S([]);e.sign.imageList&&e.sign.imageList.map(s=>{b.value.push({url:s})});const f=S(e.sign);console.log("sign",e);let c="\u6CE8\uFF1A\u8BF7\u5728";return f.value.mark.map((s,o)=>{let v=s.page,n=s.desc;c+="\u7B2C"+v+"\u9875",c+=n+"\u5904",o<f.value.mark.length-1&&(c+="\u3001")}),c+="\u7B7E\u5B57\u540E\u626B\u63CF\u590D\u5370\u4EF6\u6216\u624B\u673A\u62CD\u7167\u4E0A\u4F20",S(""),S(!1),{fileList:b,sign:f,mark:c,subUploadFile:s=>{console.log(s);const o=new FormData;if(o.append("file",s.file),console.log(o,s.file.size),parseInt(s.file.size/1e3)>1024*100){ElMessage.error("\u6587\u4EF6\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC7100M");return}return te({formData:o,order_status:17,order_id:e.orderId}).then(v=>{console.log("imgList",b.value);let n=v.data;return b.value.push({url:"https://narcissus-me.s3.ap-northeast-1.amazonaws.com/"+n.file_name,name:""}),d.emit("update",b.value.map(h=>h.url)),!0})}}}}),j=e=>(U("data-v-db49970a"),e=e(),O(),e),Iu=j(()=>a("h2",null,"\u56DE\u4F20\u7B7E\u5B57",-1)),wu=j(()=>a("div",{class:"desc"},"\u4EE5\u4E0B\u662F\u56DE\u4F20\u7B7E\u5B57\u8D44\u6599PDF\u6587\u4EF6\uFF0C\u4E0B\u8F7D\u8BF7\u6309\u8981\u6C42\u7B7E\u5B57",-1)),Su={class:"table-container"},Tu={class:"table-layout"},Lu={class:"table-cell"},Vu=["href"],Uu=j(()=>a("br",null,null,-1)),Ou=j(()=>a("br",null,null,-1)),Pu=j(()=>a("br",null,null,-1)),Ru=["src"];function Nu(e,d,b,f,c,B){const s=y("el-divider"),o=y("Document"),v=y("el-alert"),n=y("Plus"),h=y("el-icon"),C=y("el-upload"),F=y("el-dialog");return t(),g(D,null,[l(s,{"content-position":"left"},{default:u(()=>[Iu]),_:1}),wu,a("div",Su,[a("table",Tu,[a("tbody",null,[a("tr",null,[a("td",Lu,[l(o,{style:{width:"1.3em",color:"#999","vertical-align":"sub","margin-right":"8px"}}),r(" "+i(e.sign.pdfPath)+" ",1),a("a",{href:"https://narcissus-me.s3.ap-northeast-1.amazonaws.com/"+e.sign.pdfPath,download:"download"},"\u4E0B\u8F7D",8,Vu)])])])])]),Uu,Ou,l(v,{title:e.mark,type:"info"},null,8,["title"]),Pu,a("div",null,[l(C,{"file-list":e.fileList,action:"","http-request":e.subUploadFile,"list-type":"picture-card","on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove},{default:u(()=>[l(h,null,{default:u(()=>[l(n)]),_:1})]),_:1},8,["file-list","http-request","on-preview","on-remove"]),l(F,{modelValue:e.dialogVisible,"onUpdate:modelValue":d[0]||(d[0]=$=>e.dialogVisible=$)},{default:u(()=>[a("img",{"w-full":"",src:e.dialogImageUrl,style:{width:"100%"},alt:"Preview Image"},null,8,Ru)]),_:1},8,["modelValue"])])],64)}var Mu=P(ku,[["render",Nu],["__scopeId","data-v-db49970a"]]);const qu=V({components:{},props:{backSign:{type:Array}},setup(e,d){return e.backSign}}),se=e=>(U("data-v-045229f8"),e=e(),O(),e),zu=se(()=>a("h2",null,"\u7B7E\u56DE",-1)),ju=se(()=>a("div",{class:"desc"},"\u7B7E\u56DE\u56FE\u7247",-1)),Zu={class:"demo-image__lazy"};function Gu(e,d,b,f,c,B){const s=y("el-divider"),o=y("el-image");return t(),g(D,null,[l(s,{"content-position":"left"},{default:u(()=>[zu]),_:1}),ju,a("div",Zu,[(t(!0),g(D,null,w(e.backSign,v=>(t(),m(o,{key:v,src:v,lazy:""},null,8,["src"]))),128))])],64)}var Ju=P(qu,[["render",Gu],["__scopeId","data-v-045229f8"]]);const Hu=V({components:{},props:{detail:{type:Object}},emits:["update"],setup(e,d){const{order:b,invoice:f,pay:c,upload:B,sign:s,backSign:o}=e.detail;let v="\u6CE8\uFF1A\u8BF7\u5728";return s.mark.map((n,h)=>{let C=n.page,F=n.desc;v+="\u7B2C"+C+"\u9875",v+=F+"\u5904",h<s.mark.length-1&&(v+="\u3001")}),v+="\u7B7E\u5B57\u540E\u626B\u63CF\u590D\u5370\u4EF6\u6216\u624B\u673A\u62CD\u7167\u4E0A\u4F20",{order:b,pay:c,invoice:f,upload:B,sign:s,mark:v,backSign:o}}}),R=e=>(U("data-v-7000f348"),e=e(),O(),e),Qu=R(()=>a("h2",null,"\u5B8C\u7ED3",-1)),Xu=R(()=>a("div",{class:"desc"},"\u5404\u4E1A\u52A1\u8282\u70B9\u8BE6\u60C5\u5185\u5BB9",-1)),Ku={class:"desc"},Wu={key:0},Yu={key:1},xu={class:"total-price"},ea=R(()=>a("span",null,"\u5408\u8BA1\uFF1A",-1)),ua={class:"price"},aa={class:"total-price"},ta=R(()=>a("span",null,"\u5408\u8BA1\uFF1A",-1)),la={class:"price"},oa={class:"demo-image__preview"},na={class:"table-container"},sa={class:"table-layout"},ra=R(()=>a("tr",null,[a("td",{class:"table-cell",bgcolor:"#f1f1f1",style:{width:"60px"}},"\u5E8F\u53F7"),a("td",{class:"table-cell",bgcolor:"#f1f1f1"},"\u8D44\u6599\u540D\u79F0"),a("td",{class:"table-cell",bgcolor:"#f1f1f1",style:{width:"80px"}},"\u72B6\u6001"),a("td",{class:"table-cell",bgcolor:"#f1f1f1"},"\u5907\u6CE8")],-1)),ia={class:"table-cell"},da={class:"table-cell"},pa={class:"table-cell"},ca={class:"table-cell"},_a={key:0},ma={class:"table-container"},fa={class:"table-layout"},Fa=R(()=>a("td",{class:"table-cell",style:{width:"60px"}},"\u8D44\u6599",-1)),ya={class:"table-cell"},va=["href"],ba=R(()=>a("br",null,null,-1)),ga=R(()=>a("br",null,null,-1)),ha=R(()=>a("br",null,null,-1)),Ea=R(()=>a("div",null,null,-1));function Da(e,d,b,f,c,B){const s=y("el-divider"),o=y("el-descriptions-item"),v=y("el-descriptions"),n=y("el-image"),h=y("Document"),C=y("el-alert");return t(),g(D,null,[l(s,{"content-position":"left"},{default:u(()=>[Qu]),_:1}),Xu,a("div",null,[l(s,{"content-position":"left"},{default:u(()=>[r("\u786E\u8BA4\u62A5\u4EF7")]),_:1}),a("div",Ku,[l(v,{title:"\u8BA2\u5355\u53F7"+e.order.id,column:2},{default:u(()=>[l(o,{span:2,label:"\u6240\u5728\u5DDE\uFF1A"},{default:u(()=>[r(i(e.order.regionText),1)]),_:1}),l(o,{span:2,label:"\u516C\u53F8\u7C7B\u578B\uFF1A"},{default:u(()=>[r(i(e.order.companyType==1?"C":"LLC"),1)]),_:1}),e.order.companyType==2?(t(!0),g(D,{key:0},w(e.order.ruleListDataLLC,F=>(t(),g(D,null,[F.field_name=="is_c_rule"?(t(),m(o,{key:0,label:"\u662F\u5426\u6309\u7167C\u516C\u53F8\u65B9\u5F0F\u7EB3\u7A0E\uFF1A",span:2},{default:u(()=>[r(i(e.order.is_c_rule?"\u662F":"\u5426"),1)]),_:1})):_("",!0),e.order.is_c_rule?(t(),g(D,{key:1},[F.field_name=="first_year"?(t(),m(o,{key:0,label:"\u662F\u5426\u7B2C\u4E00\u5E74\u7EB3\u7A0E\uFF1A"},{default:u(()=>[r(i(e.order.first_year?"\u662F":"\u5426"),1)]),_:1})):_("",!0),F.field_name=="first_year"?(t(),m(o,{key:1,label:"\u8D39\u7528\uFF1A"},{default:u(()=>[e.order.first_year?(t(),g("span",Wu,i(F.price),1)):(t(),g("span",Yu,"0"))]),_:2},1024)):_("",!0)],64)):(t(),g(D,{key:2},[F.field_name=="has_us_tax_no"?(t(),m(o,{key:0,span:2,label:"\u662F\u5426\u6709\u7F8E\u56FD\u7A0E\u53F7\uFF1A"},{default:u(()=>[r(i(e.order.has_us_tax_no?"\u662F":"\u5426"),1)]),_:1})):_("",!0),e.order.has_us_tax_no?_("",!0):(t(),g(D,{key:1},[F.field_name=="apply_individual"&&e.order.taxType=="apply_individual"?(t(),m(o,{key:0,label:"\u7533\u8BF7\u7A0E\u53F7\u7C7B\u578B\uFF1A"},{default:u(()=>[r("\u4E2A\u4EBA\u80A1\u4E1C")]),_:1})):_("",!0),F.field_name=="apply_individual"&&e.order.taxType=="apply_individual"?(t(),m(o,{key:1,label:"\u8D39\u7528\uFF1A"},{default:u(()=>[r(i(F.price),1)]),_:2},1024)):_("",!0),F.field_name=="apply_company"&&e.order.taxType=="apply_company"?(t(),m(o,{key:2,label:"\u7533\u8BF7\u7A0E\u53F7\u7C7B\u578B\uFF1A"},{default:u(()=>[r("\u516C\u53F8\u80A1\u4E1C")]),_:1})):_("",!0),F.field_name=="apply_company"&&e.order.taxType=="apply_company"?(t(),m(o,{key:3,label:"\u8D39\u7528\uFF1A"},{default:u(()=>[r(i(F.price)+"\u7F8E\u5143",1)]),_:2},1024)):_("",!0)],64))],64))],64))),256)):_("",!0),l(o,{label:"\u4E3B\u8425\u4E1A\u52A1\u6536\u5165\uFF1A"},{default:u(()=>[r(i(e.order.companyMainIncome.rule_content)+"\u4E07\u7F8E\u5143",1)]),_:1}),l(o,{label:"\u8D39\u7528\uFF1A"},{default:u(()=>[r(i(e.order.companyMainIncome.price||0)+"\u7F8E\u5143",1)]),_:1}),l(o,{span:2,label:"\u4E3B\u8425\u4E1A\u52A1\u7C7B\u578B\uFF1A"},{default:u(()=>[r(i(e.order.main_business_type),1)]),_:1}),l(o,{span:2,label:"\u516C\u53F8\u8D44\u4EA7\u603B\u989D\uFF1A"},{default:u(()=>[r(i(e.order.total_asset),1)]),_:1}),(t(!0),g(D,null,w(e.order.ruleListDataC,F=>(t(),g(D,null,[F.field_name=="amount_fixed_asset"?(t(),m(o,{key:0,label:"\u56FA\u5B9A\u8D44\u4EA7\u91D1\u989D\uFF1A"},{default:u(()=>[r(i(e.order.amount_fixed_asset||0)+"\u4E07\u7F8E\u5143",1)]),_:1})):_("",!0),F.field_name=="amount_fixed_asset"?(t(),m(o,{key:1,label:"\u8D39\u7528\uFF1A"},{default:u(()=>[r(i(e.order.amount_fixed_asset>0?F.price:0)+"\u7F8E\u5143",1)]),_:2},1024)):_("",!0),F.field_name=="exchange_fund_com_number"?(t(),m(o,{key:2,label:"\u8D44\u91D1\u5F80\u6765\u516C\u53F8\u6570\uFF1A"},{default:u(()=>[r(i(e.order.exchange_fund_com_number),1)]),_:1})):_("",!0),F.field_name=="exchange_fund_com_number"?(t(),m(o,{key:3,label:"\u8D39\u7528\uFF1A"},{default:u(()=>[r(i((e.order.exchange_fund_com_number||0)*F.price)+"\u7F8E\u5143",1)]),_:2},1024)):_("",!0),F.field_name=="subsidiary_us"?(t(),m(o,{key:4,label:"\u5728\u7F8E\u5B50\u516C\u53F8\u6570\uFF1A"},{default:u(()=>[r(i(e.order.subsidiary_us),1)]),_:1})):_("",!0),F.field_name=="subsidiary_us"?(t(),m(o,{key:5,label:"\u8D39\u7528\uFF1A"},{default:u(()=>[r(i((e.order.subsidiary_us||0)*F.price||0)+"\u7F8E\u5143",1)]),_:2},1024)):_("",!0),F.field_name=="subsidiary_non_us_number"?(t(),m(o,{key:6,label:"\u975E\u7F8E\u5B50\u516C\u53F8\uFF1A"},{default:u(()=>[r(i(e.order.subsidiary_non_us_number),1)]),_:1})):_("",!0),F.field_name=="subsidiary_non_us_number"?(t(),m(o,{key:7,label:"\u8D39\u7528\uFF1A"},{default:u(()=>[r(i((e.order.subsidiary_non_us_number||0)*F.price||0)+"\u7F8E\u5143",1)]),_:2},1024)):_("",!0)],64))),256))]),_:1},8,["title"]),a("div",null,[a("span",xu,[ea,a("span",ua,"$"+i(e.order.totalPrice),1)])])]),l(s,{"content-position":"left"},{default:u(()=>[r("\u51FA\u5177\u53D1\u7968")]),_:1}),a("div",null,[l(v,{column:1},{default:u(()=>[l(o,{label:"\u5BA2\u6237\u5355\u4F4D\u540D\u5B57\uFF1A"},{default:u(()=>[r(i(e.invoice.agentName),1)]),_:1}),l(o,{label:"\u670D\u52A1\u516C\u53F8\u540D\u5B57\uFF1A"},{default:u(()=>[r(i(e.invoice.companyName),1)]),_:1}),l(o,{label:"\u670D\u52A1\u5185\u5BB9\uFF1A"},{default:u(()=>[r(i(e.invoice.content),1)]),_:1}),l(o,{label:"\u90AE\u7BB1\uFF1A"},{default:u(()=>[r(i(e.invoice.email),1)]),_:1})]),_:1}),a("div",null,[a("span",aa,[ta,a("span",la,"$"+i(e.invoice.price),1)])])]),l(s,{"content-position":"left"},{default:u(()=>[r("\u4ED8\u6B3E")]),_:1}),a("div",oa,[(t(!0),g(D,null,w(e.pay.voucher,(F,$)=>(t(),m(n,{style:{width:"100px",height:"100px",margin:"5px"},src:F,"zoom-rate":1.2,"max-scale":7,"min-scale":.2,"preview-src-list":e.pay.voucher,"initial-index":$,fit:"cover"},null,8,["src","preview-src-list","initial-index"]))),256))]),l(s,{"content-position":"left"},{default:u(()=>[r("\u6750\u6599\u5BA1\u6838")]),_:1}),a("div",na,[a("table",sa,[a("tbody",null,[ra,(t(!0),g(D,null,w(e.upload.list,(F,$)=>(t(),g("tr",null,[a("td",ia,i($+1),1),a("td",da,i(F.name),1),a("td",pa,i(F.status==1?"\u901A\u8FC7":F.status==-1?"\u4E0D\u901A\u8FC7":"\u5BA1\u6838\u4E2D"),1),a("td",ca,[F.status==-1?(t(),g("span",_a,i(F.reason),1)):_("",!0)])]))),256))])])]),l(s,{"content-position":"left"},{default:u(()=>[r("\u56DE\u4F20\u7B7E\u5B57")]),_:1}),a("div",ma,[a("table",fa,[a("tbody",null,[a("tr",null,[Fa,a("td",ya,[l(h,{style:{width:"1.3em",color:"#999","vertical-align":"sub","margin-right":"8px"}}),r(" "+i(e.sign.pdfPath)+" ",1),a("a",{href:"https://narcissus-me.s3.ap-northeast-1.amazonaws.com/"+e.sign.pdfPath,download:"download"},"\u4E0B\u8F7D",8,va)])])])]),ba,l(C,{title:e.mark,type:"info"},null,8,["title"]),ga,(t(!0),g(D,null,w(e.sign.imageList,(F,$)=>(t(),m(n,{style:{width:"100px",margin:"5px"},src:F,"zoom-rate":1.2,"max-scale":7,"min-scale":.2,"preview-src-list":e.sign.imageList,"initial-index":$,fit:"cover"},null,8,["src","preview-src-list","initial-index"]))),256))]),l(s,{"content-position":"left"},{default:u(()=>[r("\u7B7E\u56DE")]),_:1}),a("div",null,[ha,(t(!0),g(D,null,w(e.backSign,(F,$)=>(t(),m(n,{style:{width:"100px"},src:F,"zoom-rate":1.2,"max-scale":7,"min-scale":.2,"preview-src-list":e.backSign,"initial-index":$,fit:"cover"},null,8,["src","preview-src-list","initial-index"]))),256))]),Ea])],64)}var Aa=P(Hu,[["render",Da],["__scopeId","data-v-7000f348"]]);const Ca=e=>(U("data-v-250f93cd"),e=e(),O(),e),Ba={class:"container box"},$a={class:"formArea"},ka={style:{"margin-top":"15px"}},Ia=Ca(()=>a("br",null,null,-1)),wa=V({__name:"index",setup(e){const d=Y();d.currentRoute.value.query.type;const b=S(d.currentRoute.value.query.orderId),f=JSON.parse(localStorage.getItem("userInfo"));Z([{name:"QUOTATION_STARTED",val:10},{name:"QUOTATION_CONFIRMED",val:11},{name:"INVOICE_ISSUED",val:12},{name:"PAID",val:13},{name:"NO_PAID_CONTINUE",val:14},{name:"DOCUMENT_UPLOADED",val:15},{name:"DOCUMENT_REVIEWED",val:16},{name:"SIGNATURE_RETURNED",val:16},{name:"SIGNATURE_RETURNED_BACK",val:17},{name:"FINISHED",val:18},{name:"DELETED",val:99}]);let c=Z({order:{ruleListDataC:[],ruleListDataLLC:[],selectRegion:"",regionText:"",companyType:"",mainBusinessIncome:{type:"",inUSchildCompany:2,noUSchildCompany:1},companyMainIncome:{price:0},main_business_type:"",total_asset:"",fixedAssetAmount:"",isMoneyTrading:!0,isChildCompany:!0,isConfirm:!1},invoice:{agentName:f.agent,companyName:f.company_name,content:"",price:0,email:f.email},pay:{voucher:[]},upload:{list:[]},sign:{pdfPath:"",mark:[{page:"22",desc:"\u53F3\u4E0B\u65B9\u7B7E\u540D"},{page:"23",desc:"\u5DE6\u4E0B\u65B9\u7B7E\u540D"}],isSign:!0},backSign:[],isDone:!1});const B=S(),s=S(0),o=()=>{s.value--<=0&&(s.value=0)},v=()=>{s.value==0&&b.value==null?C():s.value++>7&&(s.value=0)},n={10:{active:0},11:{active:1},12:{active:2},13:{active:3},14:{active:3},15:{active:4},16:{active:5},17:{active:6},18:{active:7},20:{active:8}},h=async E=>{ve(b.value,{orderStatus:E,businessType:10})},C=()=>{fe({order_status:10,businessType:10,creator:f.uid,content:c}).then(E=>{b.value=E.data.order_id,s.value=s.value+1,c.order.id=E.data.order_id,h(10)}).catch(E=>{console.log(E)})},F=()=>{if(s.value==0&&b.value==null){C();return}Fe({orderId:b.value,data:{creator:f.uid,content:c}}).then(E=>{console.log("update order",E),s.value==1&&h(11)}).catch(E=>{console.log(E)})},$=E=>{c.order={...c.order,...E}},T=E=>{c.invoice.price=E},M=E=>{c.invoice=E},q=E=>{c.pay.voucher=E},A=E=>{c.upload.list=E},p=E=>{c.sign.imageList=E},k=()=>{ye({order_id:b.value}).then(E=>{let N=E.data;const I=JSON.parse(N.content);c.order.id=b.value,c.order={...c.order,...I.order},c.invoice={...c.invoice,...I.invoice},c.pay={...c.pay,...I.pay},c.upload={...c.upload,...I.upload},c.sign={...c.sign,...I.sign},c.backSign=I.backSign,c.isDone=I.isDone,B.value=N.order_status;let J=n[B.value.toString()].active;s.value=J}).catch(E=>{console.log(E)})};return ee(()=>{b.value!==void 0&&k()}),(E,N)=>{const I=y("el-step"),J=y("el-steps"),K=y("el-col"),re=y("el-card"),H=y("el-button"),ie=y("el-row");return t(),g("div",Ba,[l(ie,null,{default:u(()=>[l(K,{span:24},{default:u(()=>[l(J,{active:s.value,"finish-status":"success","align-center":""},{default:u(()=>[l(I,{title:"\u62A5\u4EF7",description:"description"}),l(I,{title:"\u786E\u8BA4\u62A5\u4EF7",description:"description"}),l(I,{title:"\u51FA\u5177\u53D1\u7968",description:"description"}),l(I,{title:"\u4ED8\u6B3E",description:"description"}),l(I,{title:"\u4E0A\u4F20\u8D44\u6599",description:"description"}),l(I,{title:"\u5BA1\u6838\u8D44\u6599",description:"description"}),l(I,{title:"\u56DE\u4F20\u7B7E\u5B57",description:"description"}),l(I,{title:"\u7B7E\u56DE",description:"description"}),l(I,{title:"\u5B8C\u7ED3",description:"description"})]),_:1},8,["active"])]),_:1}),l(K,{span:24},{default:u(()=>[a("div",$a,[l(re,null,{default:u(()=>[s.value==0?(t(),m(Ue,{key:0,ref:"step",order:L(c).order,orderId:b.value,orderStatus:B.value,invoice:L(c).invoice,onUpdate:$},null,8,["order","orderId","orderStatus","invoice"])):_("",!0),s.value==1?(t(),m(Ge,{key:1,ref:"step",order:L(c).order,onUpdate:T},null,8,["order"])):_("",!0),s.value==2?(t(),m(We,{key:2,ref:"step",invoice:L(c).invoice,onUpdate:M},null,8,["invoice"])):_("",!0),s.value==3?(t(),m(tu,{key:3,ref:"step",pay:L(c).pay,onUpdate:q,orderId:b.value},null,8,["pay","orderId"])):_("",!0),s.value==4?(t(),m(mu,{key:4,ref:"step",upload:L(c).upload,onUpdate:A,orderId:b.value},null,8,["upload","orderId"])):_("",!0),s.value==5?(t(),m($u,{key:5,ref:"step",upload:L(c).upload},null,8,["upload"])):_("",!0),s.value==6?(t(),m(Mu,{key:6,ref:"step",orderId:b.value,sign:L(c).sign,onUpdate:p},null,8,["orderId","sign"])):_("",!0),s.value==7?(t(),m(Ju,{key:7,ref:"step",backSign:L(c).backSign},null,8,["backSign"])):_("",!0),s.value==8?(t(),m(Aa,{key:8,detail:L(c),orderId:b.value},null,8,["detail","orderId"])):_("",!0)]),_:1}),a("div",ka,[s.value==1?(t(),m(H,{key:0,onClick:o},{default:u(()=>[r("\u4E0A\u4E00\u6B65")]),_:1})):_("",!0),l(H,{onClick:N[0]||(N[0]=Sa=>F())},{default:u(()=>[r("\u4FDD\u5B58")]),_:1}),s.value==0?(t(),m(H,{key:1,onClick:v},{default:u(()=>[r(i(s.value==1&&b.value==null?"\u521B\u5EFA\u8BA2\u5355":"\u4E0B\u4E00\u6B65"),1)]),_:1})):_("",!0)])])]),_:1})]),_:1}),Ia])}}});var pt=P(wa,[["__scopeId","data-v-250f93cd"]]);export{pt as default};
