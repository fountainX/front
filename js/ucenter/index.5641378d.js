import{d as G,e as m,_ as C,j as J,ai as n,o as v,c as h,V as u,a as s,P as o,F as y,u as U,T as g,U as T,a3 as K,a8 as X,O as Y,bl as ee,bk as ue,i as te}from"../@vue/@vue.5f8b0814.js";import{H as ae,F as le,b as oe,e as ne,h as re}from"../footer/footer.fda4f9e0.js";import{u as se}from"../vue-router/vue-router.f22f5c28.js";import{i as ie}from"../order/order.a9f0024e.js";import{g as de,b as pe}from"../type/type.0d69a785.js";import{_ as me}from"../../assets/index.02708b2e.js";import{E as ce}from"../element-plus/element-plus.c1fb1f77.js";import"../store/store.b9bb45f0.js";import"../pinia/pinia.55dc9685.js";import"../vue-demi/vue-demi.4f3c4c97.js";import"../vue-i18n/vue-i18n.3119c07c.js";import"../@intlify/@intlify.6f12553a.js";import"../vue/vue.6562b2b2.js";import"../Http/Http.f08bb66b.js";import"../axios/axios.3ae77db0.js";import"../nprogress/nprogress.4e8ed813.js";import"../js-cookie/js-cookie.0390a690.js";import"../@element-plus/@element-plus.a41cd0da.js";import"../pinia-plugin-persistedstate/pinia-plugin-persistedstate.54412c64.js";import"../lodash-es/lodash-es.dd79b3a5.js";import"../@vueuse/@vueuse.01c4cb4e.js";import"../@popperjs/@popperjs.f1fb8f77.js";import"../@ctrl/@ctrl.9c8f424f.js";import"../dayjs/dayjs.79e01697.js";import"../async-validator/async-validator.21881447.js";import"../memoize-one/memoize-one.f0fba034.js";import"../normalize-wheel-es/normalize-wheel-es.94de1731.js";import"../@floating-ui/@floating-ui.daef5853.js";const E=c=>(ee("data-v-2c490002"),c=c(),ue(),c),_e=E(()=>s("br",null,null,-1)),ge=E(()=>s("br",null,null,-1)),Ee={class:"container"},be={class:"box"},Ae={class:"page"},fe={class:"box tc"},Fe=E(()=>s("br",null,null,-1)),ve=E(()=>s("br",null,null,-1)),De=G({__name:"index",setup(c){const b=se(),A=m(!0),D=b.currentRoute.value.query.uid,f=m(JSON.parse(localStorage.getItem("userInfo")));(()=>{if(f.value==null){f.value={uid:""},b.push("/login");return}})();const w=[{id:"10",value:"QUOTATION_STARTED",desc:"\u62A5\u4EF7\u5F00\u59CB"},{id:"11",value:"QUOTATION_CONFIRMED",desc:"\u62A5\u4EF7\u786E\u8BA4"},{id:"12",value:"INVOICE_ISSUED",desc:"\u53D1\u7968\u5F00\u5177"},{id:"13",value:"PAID",desc:"\u5DF2\u4ED8\u6B3E"},{id:"14",value:"NO_PAID_CONTINUE",desc:"\u672A\u4ED8\u6B3E\u53EF\u4EE5\u7EE7\u7EED\u6D41\u7A0B"},{id:"15",value:"DOCUMENT_UPLOADED",desc:"\u8D44\u6599\u4E0A\u4F20"},{id:"16",value:"DOCUMENT_REVIEWED",desc:"\u8D44\u6599\u5BA1\u6838"},{id:"17",value:"DOCUMENT_REVIEWED",desc:"\u7B7E\u5B57\u56DE\u4F20"},{id:"18",value:"SIGNATURE_RETURNED_BACK",desc:"\u7B7E\u56DE"},{id:"20",value:"FINISHED",desc:"\u5B8C\u7ED3"},{id:"99",value:"DELETED",desc:"\u5220\u9664"}],x=a=>a?w.find(r=>r.id==a).desc:void 0,B=m("1"),O=(a,e)=>{console.log(a,e),a.uid==13&&F()};let N=m([]);const l=C({userName:"",fullName:"",agent:"",email:"",mobile:"",wechat:""}),S={userName:[{required:!0,message:"\u7528\u6237\u4E0D\u53EF\u4E3A\u7A7A"}],fullName:[{required:!0,message:"\u59D3\u540D\u4E0D\u53EF\u4E3A\u7A7A"}],password:[{required:!0,message:"\u5BC6\u7801\u4E0D\u53EF\u4E3A\u7A7A"}],email:[{required:!0,message:"\u90AE\u7BB1\u4E0D\u53EF\u4E3A\u7A7A"},{pattern:/^([-_A-Za-z0-9.]+)@([_A-Za-z0-9]+\.)+[A-Za-z0-9]{2,3}$/,trigger:["blur","change"],message:"\u90AE\u7BB1\u683C\u5F0F\u4E0D\u6B63\u786E"}],mobile:[{required:!0,message:"\u624B\u673A\u53F7\u4E0D\u53EF\u4E3A\u7A7A"},{pattern:/^[1][3-9][0-9]{9}$/,trigger:["blur","change"],message:"\u8BF7\u8F93\u5165\u6B63\u786E\u624B\u673A\u53F7"}],wechat:[{required:!0,message:"\u5FAE\u4FE1\u53F7\u4E0D\u53EF\u4E3A\u7A7A"}]},q=a=>{oe({uid:a}).then(e=>{console.log("userinfo",e),l.userName=e.data.user_name,l.fullName=e.data.full_name,l.agent=e.data.agent,l.email=e.data.email,l.mobile=e.data.mobile,l.wechat=e.data.wechat,l.agentId=e.data.agent_id}).catch(e=>{console.log(e)})},i=C({total:0,current:1,pageSize:10}),F=()=>{A.value=!0;let a={page:i.current,count:i.pageSize,businessType:10,uid:f.value.uid};ie(a).then(e=>{e.code==200&&(N.value=e.data,i.total=e.total,A.value=!1)}).catch(e=>{console.log(e)})},L=(a,e)=>{let r=pe.find(_=>_.id==e);b.push({path:"order",query:{type:r.value,orderId:a}})};q(D),F();const k=()=>{re(D,l).then(a=>{a.code==200&&ce.success("\u66F4\u65B0\u6210\u529F")}).catch(a=>{console.log(a)})},z=te(),R=()=>{z.proxy.$refs.vForm.validate(a=>{!a||k()})},M=async()=>{let a=await ne();I.value=a.data,console.log(a)},I=m([]);return J(()=>{M()}),(a,e)=>{const r=n("el-table-column"),_=n("el-button"),P=n("el-table"),$=n("el-pagination"),V=n("el-tab-pane"),p=n("el-input"),d=n("el-form-item"),H=n("el-option"),Z=n("el-select"),Q=n("el-form"),W=n("el-tabs"),j=n("el-card");return v(),h(y,null,[u(ae),_e,ge,s("div",Ee,[u(j,null,{default:o(()=>[u(W,{modelValue:B.value,"onUpdate:modelValue":e[10]||(e[10]=t=>B.value=t),class:"demo-tabs",onTabClick:O},{default:o(()=>[u(V,{label:"\u6211\u7684\u8BA2\u5355",name:"1"},{default:o(()=>[s("div",be,[u(P,{data:U(N),loading:A.value,stripe:"",border:""},{default:o(()=>[u(r,{prop:"order_id",label:"\u8BA2\u5355ID",width:"100"}),u(r,{prop:"business_type",label:"\u8BA2\u5355\u7C7B\u578B",width:"140"},{default:o(t=>[g(T(U(de)(t.row.business_type)),1)]),_:1}),u(r,{prop:"order_no",label:"\u8BA2\u5355\u7F16\u53F7"}),u(r,{prop:"order_status",label:"\u8BA2\u5355\u72B6\u6001"},{default:o(t=>[g(T(x(t.row.order_status)),1)]),_:1}),u(r,{prop:"updateTime",label:"\u66F4\u65B0\u65F6\u95F4"}),u(r,{label:"\u64CD\u4F5C",width:"110"},{default:o(({row:t})=>[u(_,{type:"primary",size:"small",onClick:Ne=>L(t.order_id,t.business_type),plain:""},{default:o(()=>[g("\u67E5\u770B\u8BA2\u5355")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","loading"]),s("div",Ae,[u($,{background:"",layout:"prev, pager, next","current-page":i.current,"onUpdate:currentPage":e[0]||(e[0]=t=>i.current=t),"page-size":i.pageSize,total:i.total,onCurrentChange:e[1]||(e[1]=()=>{F()})},null,8,["current-page","page-size","total"])])])]),_:1}),u(V,{label:"\u4E2A\u4EBA\u8D44\u6599",name:"2"},{default:o(()=>[s("div",fe,[u(Q,{model:l,ref:"vForm",rules:S,"label-position":"right","label-width":"100px",onSubmit:e[9]||(e[9]=K(()=>{},["prevent"]))},{default:o(()=>[u(d,{label:"\u7528\u6237\u540D\uFF1A",prop:"userName",class:"required label-right-align"},{default:o(()=>[u(p,{modelValue:l.userName,"onUpdate:modelValue":e[2]||(e[2]=t=>l.userName=t),type:"text",clearable:""},null,8,["modelValue"])]),_:1}),u(d,{label:"\u59D3\u540D\uFF1A",prop:"fullName",class:"required label-right-align"},{default:o(()=>[u(p,{modelValue:l.fullName,"onUpdate:modelValue":e[3]||(e[3]=t=>l.fullName=t),type:"text",clearable:""},null,8,["modelValue"])]),_:1}),u(d,{label:"\u4EE3\u7406\uFF1A",prop:"agentId",class:"label-right-align"},{default:o(()=>[u(Z,{disabled:"",modelValue:l.agentId,"onUpdate:modelValue":e[4]||(e[4]=t=>l.agentId=t),onChange:a.selectAgent,style:{width:"100%"}},{default:o(()=>[(v(!0),h(y,null,X(I.value,t=>(v(),Y(H,{value:t.agent_id,label:t.agent_name},null,8,["value","label"]))),256))]),_:1},8,["modelValue","onChange"])]),_:1}),u(d,{label:"\u90AE\u7BB1\uFF1A",prop:"email",class:"required label-right-align"},{default:o(()=>[u(p,{modelValue:l.email,"onUpdate:modelValue":e[5]||(e[5]=t=>l.email=t),type:"text",clearable:""},null,8,["modelValue"])]),_:1}),u(d,{label:"\u624B\u673A\u53F7\uFF1A",prop:"mobile",class:"required label-right-align"},{default:o(()=>[u(p,{modelValue:l.mobile,"onUpdate:modelValue":e[6]||(e[6]=t=>l.mobile=t),type:"text",clearable:""},null,8,["modelValue"])]),_:1}),u(d,{label:"\u5FAE\u4FE1\u53F7\uFF1A",prop:"wechat",class:"required label-right-align"},{default:o(()=>[u(p,{modelValue:l.wechat,"onUpdate:modelValue":e[7]||(e[7]=t=>l.wechat=t),type:"text",clearable:""},null,8,["modelValue"])]),_:1}),u(d,null,{default:o(()=>[u(_,{type:"primary",onClick:e[8]||(e[8]=t=>R())},{default:o(()=>[g("\u4FEE\u6539\u7528\u6237\u4FE1\u606F")]),_:1})]),_:1})]),_:1},8,["model"])])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),Fe,ve,u(le)],64)}}});var Ye=me(De,[["__scopeId","data-v-2c490002"]]);export{Ye as default};
